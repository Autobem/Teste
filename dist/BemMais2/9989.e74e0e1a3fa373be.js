"use strict";(self.webpackChunkBemMais2=self.webpackChunkBemMais2||[]).push([[9989],{9989:(Ce,R,o)=>{o.r(R),o.d(R,{UsersModule:()=>Ne});var v=o(9808),h=o(4521),$=o(1135),u=o(5698),O=o(6367),D=o(312),e=o(5e3),Y=o(8080),U=o(7751),L=o(2076),S=o(9646),J=o(3900),m=o(2340),k=o(520),N=o(1235);let Z=(()=>{class i{constructor(t,s){this.http=t,this.ngxPermissionsService=s}getStatics(){return this.http.get(`${m.N.baseURL}/administrative/users/static`)}searchUsers(t,s,r){return this.http.post(`${m.N.baseURL}/administrative/users/search`,{terms:t,skip:s,take:r})}getUsers(t,s){return this.http.get(`${m.N.baseURL}/administrative/users/${t}/${s}`)}getUser(t){return this.http.get(`${m.N.baseURL}/administrative/users/${t}`)}saveUser(t){return this.http.post(`${m.N.baseURL}/administrative/users`,t)}editUser(t){return this.http.put(`${m.N.baseURL}/administrative/users`,t)}lockUser(t,s){return this.http.put(`${m.N.baseURL}/administrative/users/${t.id}/enable/${s}`,null)}getCompanies(){return this.http.get(`${m.N.baseURL}/administrative/users/companies`)}getCompanyDepartments(t){return this.http.get(`${m.N.baseURL}/administrative/users/company/${t}/departments`)}getCompanyRoles(t){return this.http.get(`${m.N.baseURL}/administrative/users/department/${t}/roles`)}getPermissions(){return(0,L.D)(this.ngxPermissionsService.hasPermission(["ROOT","SYSTEM_SET_USER_PERMISSIONS","SYSTEM_VIEW_USER_PERMISSIONS"])).pipe((0,J.w)(t=>t?this.http.get(`${m.N.baseURL}/administrative/users/permissions`):(0,S.of)([])))}getUserPermisions(t){return this.http.get(`${m.N.baseURL}/administrative/users/${t.id}/role/${t.roleId}/permissions`)}getRolesPermissions(t){return this.http.get(`${m.N.baseURL}/administrative/users/role/${t}/permissions`)}savePermissions(t,s){return this.http.post(`${m.N.baseURL}/administrative/users/${t.id}/permissions`,{id:t.id,roleId:t.roleId,permissions:s})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(k.eN),e.LFG(N.YI))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var C=o(2290),b=o(6517),q=o(5214);function F(i,n){1&i&&(e.TgZ(0,"div",15)(1,"button",16),e._UZ(2,"i",17),e.TgZ(3,"span",18),e._uU(4,"Adicionar"),e.qZA()()())}function B(i,n){1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"span",21),e._uU(3,"Loading..."),e.qZA()()())}const Q=function(){return["ROOT","SYSTEM_CREATE_USER"]};let j=(()=>{class i extends O.K{constructor(t,s,r,a,p,d){super(),this.navbarService=t,this.modalService=s,this.userRegisterService=r,this.router=a,this.route=p,this.toastrService=d,this.users$=new $.X({}),this.userNotFound=!1,this.columns=[{columnName:"displayName",displayName:"Usu\xe1rio"},{columnName:"fantasyName",displayName:"Cooperativa",hasInnerHtml:!0,cell:c=>this.socialReasonTooltip(c.fantasyName,c.companyName)},{columnName:"department",displayName:"Departamento"},{columnName:"role",displayName:"Cargo"}],this.actions=[{iconClass:"fas fa-pen",eventName:"edit",tooltip:"Editar usu\xe1rio",permissions:["SYSTEM_EDIT_USER","SYSTEM_VIEW_USER"]},{eventName:"lock",permissions:["SYSTEM_ENABLE_USER"],states:[{iconClass:"fas fa-lock-open",activeState:!0},{iconClass:"fas fa-lock",activeState:!1}],statePropertyName:"isEnabled",tooltip:"Habilitar/Desabilitar"}],this.currentPage=0,this.pageSize=10,this.searchUser=c=>this.searchTableItem(c,this.userRegisterService,this.loadTable,"searchUsers",this.users$,"Clique em criar para adicionar um usu\xe1rio.","Nenhum usu\xe1rio encontrado."),this.navbarService.setContentTitle("Painel administrativo")}ngOnInit(){this.loadTable()}loadTable(t=0,s=10){this.initTable(this.userRegisterService,"searchUsers","getUsers",this.users$,t,s)}editUser(t){this.router.navigate(["./",t.id],{relativeTo:this.route})}lockUser(t){var s;const r=this.modalService.open(D.z,{centered:!0});r.componentInstance.title=t.isEnabled?"Desabilitar usu\xe1rio":"Habilitar usu\xe1rio",r.componentInstance.type="alert",r.componentInstance.confirmButtonText="Sim",r.componentInstance.cancelButtonText="N\xe3o",r.componentInstance.list=t.isEnabled?["O usu\xe1rio ser\xe1 desabilitado, deseja continuar?"]:["O usu\xe1rio ser\xe1 habilitado, deseja continuar?"],null===(s=r.closed)||void 0===s||s.subscribe(a=>{!0===a&&this.userRegisterService.lockUser(t,!t.isEnabled).pipe((0,u.q)(1)).subscribe(p=>{this.toastrService.show("Usu\xe1rio "+(t.isEnabled?"desabilitado.":"habilitado."),"title",{toastClass:"success-toast"}),this.loadTable(10*this.paginator.pageIndex,this.paginator.pageSize)})})}onAction(t){switch(t.action){case"edit":this.editUser(t.element);break;case"lock":this.lockUser(t.element)}}socialReasonTooltip(t,s){return`\n      <div class="tooltip-container" >\n      <div> ${t} </div>\n      <div class="tooltip-content">\n      <div class="fas fa-info-circle ml-3 custom-tooltip" style="font-size: 10px" placement="right" tooltip="${s}">\n      <span class="arrow-tooltip"></span>\n      </div>\n      </div>`}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Y.I),e.Y36(U.FF),e.Y36(Z),e.Y36(h.F0),e.Y36(h.gz),e.Y36(C._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list-users"]],features:[e.qOj],decls:19,vars:12,consts:[[1,"wrapper","px-0"],[1,"content-title"],[1,"card","py-3","px-1","mt-3","min-height"],[1,"w-100","h-75"],[1,"row","w-100","h-100","m-0"],[1,"col-lg-12"],[1,"table-header","mb-3","row","d-flex","align-items-center","justify-content-between"],[1,"col-4","col-lg-6"],["class","d-flex align-items-center",4,"ngxPermissionsOnly"],[1,"col-8","col-lg-3"],["src","../../../../../../assets/icons/search.svg","alt","",1,"search-icon"],["type","search","placeholder","Buscar","id","atb-search",1,"form-control","search-input",3,"ngbTypeahead"],["input",""],[3,"dataSource","totalItems","columns","actions","spinner","onPaginator","page","action"],["loading",""],[1,"d-flex","align-items-center"],["routerLink","adicionar",1,"btn","btn-outline-primary"],[1,"fas","fa-plus","mr-0","mr-sm-2"],[1,"d-none","d-sm-block"],[1,"d-flex","justify-content-center","w-100","align-items-center","h-100"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,s){if(1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Usu\xe1rios"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),e.YNc(9,F,5,0,"div",8),e.qZA(),e.TgZ(10,"div",9),e._UZ(11,"img",10)(12,"input",11,12),e.qZA()(),e.TgZ(14,"atb-table",13),e.NdJ("onPaginator",function(a){return s.paginator=a})("page",function(a){return s.loadTable(a.skip,a.take)})("action",function(a){return s.onAction(a)}),e.ALo(15,"async"),e.ALo(16,"async"),e.qZA(),e.YNc(17,B,4,0,"ng-template",null,14,e.W1O),e.qZA()()()()()),2&t){let r,a;e.xp6(9),e.Q6J("ngxPermissionsOnly",e.DdM(11,Q)),e.xp6(3),e.Q6J("ngbTypeahead",s.searchUser),e.xp6(2),e.Q6J("dataSource",null==(r=e.lcZ(15,7,s.users$))?null:r.items)("totalItems",null==(a=e.lcZ(16,9,s.users$))?null:a.total)("columns",s.columns)("actions",s.actions)("spinner",s.spinnerTable$)}},directives:[N.gE,h.rH,U.dR,b.oH,q.a],pipes:[v.Ov],styles:["s[_ngcontent-%COMP%]   .dropdown-menu-table[_ngcontent-%COMP%]{position:absolute;right:15px}.dropdown-menu-table[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.form-control#category-select[_ngcontent-%COMP%]{font-weight:bolder;font-size:14px}.filter-dropdown[_ngcontent-%COMP%]{font-weight:700}"]}),i})();var _=o(4128),T=o(8746),l=o(3075),y=o(8966),I=o(1884),P=o(2722),w=o(9300),z=o(801),g=o(97),H=o(7579),W=o(8306),A=o(6779),G=o(2498),E=o(2569),V=o(1299),X=o(1470),K=o(3915),ee=o(1644),te=o(9444),se=o(6607);const ie=["checkboxTree"];function oe(i,n){if(1&i&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.fantasyName," ")}}function re(i,n){if(1&i&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.displayName," ")}}function ne(i,n){if(1&i&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.displayName," ")}}function ae(i,n){if(1&i&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.displayName," ")}}function le(i,n){if(1&i&&e._UZ(0,"checkbox-tree",46,47),2&i){const t=e.oxw(2);e.Q6J("nodes",t.permissionNodes)}}function de(i,n){1&i&&(e.TgZ(0,"span",48),e._uU(1,"N\xe3o existem permiss\xf5es de cargo cadastradas."),e.qZA())}const ce=function(i,n){return{"text-gray-300":i,"text-green-200":n}};function me(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div",7)(3,"div",8)(4,"span",9),e._uU(5," 6 "),e.qZA(),e.TgZ(6,"span",10),e._uU(7,"Selecione as permiss\xf5es"),e.qZA()()()(),e.TgZ(8,"div",35)(9,"div",36)(10,"div",37)(11,"div",38)(12,"span",39),e._uU(13,"Permiss\xf5es avan\xe7adas"),e.qZA(),e.TgZ(14,"a",40)(15,"span",41),e._uU(16),e.qZA(),e._UZ(17,"fa-icon",42),e.qZA()(),e.TgZ(18,"div",43),e.YNc(19,le,2,1,"checkbox-tree",44),e.YNc(20,de,2,0,"ng-template",null,45,e.W1O),e.qZA()()()(),e.BQk()),2&i){const t=e.MAs(21),s=e.oxw();e.xp6(15),e.Q6J("ngClass",e.WLB(5,ce,0===s.selectedPermissions.length,s.selectedPermissions.length>0)),e.xp6(1),e.Oqu(0===s.selectedPermissions.length?"Nenhuma atribu\xedda":1===s.selectedPermissions.length?"1 atribu\xedda":s.selectedPermissions.length+" atribu\xeddas"),e.xp6(1),e.Q6J("icon",s.faChevronRight),e.xp6(2),e.Q6J("ngIf",s.permissionNodes.length)("ngIfElse",t)}}function pe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",49)(1,"button",50),e.NdJ("click",function(){return e.CHM(t),e.oxw().closePanel()}),e._uU(2,"Cancelar"),e.qZA(),e.TgZ(3,"button",51),e._uU(4),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",t.isEditing?"Confirmar":"Cadastrar"," ")}}function ue(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",49)(1,"button",50),e.NdJ("click",function(){return e.CHM(t),e.oxw().closePanel()}),e._uU(2,"Fechar"),e.qZA()()}}const ge=function(){return{text:"Usu\xe1rios"}},he=function(i){return{text:i}},ve=function(i,n){return[i,n]};let fe=(()=>{class i extends G.o{constructor(t,s,r,a,p,d,c,f){super(d,c),this.userRegisterService=t,this.dialogRef=s,this.loading=r,this.toastrService=a,this.cdRef=p,this.injetor=d,this.modalService=c,this.data=f,this.faChevronRight=z._tD,this.isEditing=!1,this.permissions=[],this.permissionNodes=[],this.selectedPermissions=[],this.destroyed$=new H.x,this.static$=new W.y}ngOnInit(){this.static$=(0,S.of)(this.data.statics),this.form=this.formBuilder.group({username:["",[l.kI.required,l.kI.pattern(/^[a-zA-Z0-9_@\\-\\.\\+]+$/)]],document:["",[l.kI.required]],displayName:["",[l.kI.required,l.kI.pattern(/^[A-Z\xc0-\u0178][A-z\xc0-\xff']+\s([A-z\xc0-\xff']\s?)*[A-Z\xc0-\u0178][A-z\xc0-\xff']+$/)]],gender:["",l.kI.required],contacts:this.formBuilder.array([this.formBuilder.group({id:[],types:[["Mobile"]],contact:["",[l.kI.required,(0,g.tH)()]],description:["Mobile1"]}),this.formBuilder.group({id:[],types:[["Phone"]],contact:["",[(0,g.tH)()]],description:["Phone1"]}),this.formBuilder.group({id:[],types:[["Email"]],contact:["",[l.kI.required,(0,g.Le)()]],description:["Email1"]})]),addresses:this.formBuilder.array([this.formBuilder.group({id:[],clientId:[null],description:["main"],streetName:[null,[l.kI.required,(0,g.Bp)()]],number:[null,[l.kI.required,(0,g.rE)()]],complement:[null,[(0,g.Bp)()]],neighborhood:[null,[l.kI.required,(0,g.Bp)()]],city:[null,[l.kI.required,(0,g.C$)()]],federationUnit:[null,[l.kI.required]],zipCode:[null,[l.kI.required]]})]),departmentId:[{value:"",disabled:!0},l.kI.required],roleId:[{value:"",disabled:!0},l.kI.required],companyId:["",l.kI.required],id:[]}),this.form.controls.companyId.valueChanges.pipe((0,I.x)(),(0,P.R)(this.destroyed$)).subscribe(t=>{this.form.controls.departmentId.reset(),this.form.controls.roleId.reset(),this.getDepartments(t)}),this.form.controls.departmentId.valueChanges.pipe((0,I.x)(),(0,w.h)(t=>t),(0,P.R)(this.destroyed$)).subscribe(t=>{this.form.controls.roleId.reset(),this.getRoles(t)}),(this.data.loggedUserPermissions.viewPermissions||this.data.loggedUserPermissions.editPermissions)&&(this.permissionNodes=this.setTreeData(this.data.allPermissions),this.data.loggedUserPermissions.editPermissions||(this.selectedPermissions=[],this.checkboxTree.disableTree())),this.data.user&&(this.isEditing=!0,this.fillForm(this.data.user))}ngAfterViewInit(){var t;this.checkboxTree.tree.treeModel.subscribeToState(()=>{var s,r,a,p;for(const d of Object.keys((0,A.ZN)(this.checkboxTree.tree.treeModel.selectedLeafNodeIds)))1==(0,A.ZN)(this.checkboxTree.tree.treeModel.selectedLeafNodeIds)[d]?-1==this.selectedPermissions.indexOf(null===(r=null===(s=this.checkboxTree.tree.treeModel.getNodeById(d))||void 0===s?void 0:s.data)||void 0===r?void 0:r.id)&&this.selectedPermissions.push(null===(p=null===(a=this.checkboxTree.tree.treeModel.getNodeById(d))||void 0===a?void 0:a.data)||void 0===p?void 0:p.id):this.selectedPermissions=this.selectedPermissions.filter(c=>{var f,x;return c!==(null===(x=null===(f=this.checkboxTree.tree.treeModel.getNodeById(d))||void 0===f?void 0:f.data)||void 0===x?void 0:x.id)})}),(null===(t=this.data.user)||void 0===t?void 0:t.permissions)&&(this.data.loggedUserPermissions.viewPermissions||this.data.loggedUserPermissions.editPermissions)&&this.data.user.permissions.forEach(s=>{const r=this.checkboxTree.tree.treeModel.getNodeById(s);null==r||r.setIsSelected(!0)}),(this.data.loggedUserPermissions.viewPermissions||this.data.loggedUserPermissions.editPermissions)&&(this.data.loggedUserPermissions.editPermissions||(this.checkboxTree.tree.treeModel.expandAll(),this.checkboxTree.disableTree())),this.cdRef.detectChanges()}setTreeData(t){return function s(r=t){return r.map(a=>({id:a.id,name:a.displayName,children:function(){var p,d;let c=[];return(null===(p=a.childrenGroups)||void 0===p?void 0:p.length)&&(c=[...c,...s(a.childrenGroups)]),(null===(d=a.permissions)||void 0===d?void 0:d.length)&&(c=[...c,...s(a.permissions)]),c}()}))}()}getDepartments(t){var s;this.loading.show(),null===(s=this.form.get("departmentId"))||void 0===s||s.enable({emitEvent:!1}),this.departments$=this.userRegisterService.getCompanyDepartments(t).pipe((0,u.q)(1),(0,T.x)(()=>this.loading.hide()))}getRoles(t){var s;this.loading.show(),null===(s=this.form.get("roleId"))||void 0===s||s.enable({emitEvent:!1}),this.roles$=this.userRegisterService.getCompanyRoles(t).pipe((0,u.q)(1),(0,T.x)(()=>this.loading.hide()))}fillForm(t){this.form.patchValue({id:t.id,username:t.username,displayName:t.displayName,gender:t.gender,document:t.document,companyId:t.companyId,departmentId:t.departmentId,roleId:t.roleId,contacts:this.patchArrayContacts(t.contacts),address:this.patchArrayAddresses(t.addresses)}),this.data.loggedUserPermissions.editUser||Object.keys(this.form.controls).forEach(s=>{this.form.controls[s].disable({emitEvent:!1})})}submit(){if(this.form.valid){this.loading.show();const t=Object.assign({},this.form.value);t.contacts=t.contacts.filter(r=>""!=r.contact),t.permissions=this.selectedPermissions,this.userRegisterService[this.isEditing?"editUser":"saveUser"](t).pipe((0,T.x)(()=>this.loading.hide())).subscribe(r=>{this.dialogRef.close(),this.toastrService.show(`Usu\xe1rio ${this.isEditing?"alterado":"criado"}!`,"title",{toastClass:"success-toast"})})}else this.form.markAllAsTouched(),this.markAllAsDirty(this.form),this.toastrService.show("Formul\xe1rio inv\xe1lido! Verifique os campos e tente novamente!","title",{toastClass:"error-toast"})}closePanel(){this.dialogRef.close(!1)}ngOnDestroy(){this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z),e.Y36(y.so),e.Y36(E.b),e.Y36(C._W),e.Y36(e.sBO),e.Y36(e.zs3),e.Y36(U.FF),e.Y36(y.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-register-dialog"]],viewQuery:function(t,s){if(1&t&&e.Gf(ie,5),2&t){let r;e.iGM(r=e.CRH())&&(s.checkboxTree=r.first)}},features:[e.qOj],decls:101,vars:25,consts:[[1,"wrapper","px-0"],[1,"container"],[1,"d-flex","flex-column"],[3,"isModal","items","closeModal"],[1,"card","p-5"],["id","user-register-form",3,"formGroup","ngSubmit"],[1,"row","mt-4"],[1,"col-lg-12"],[1,"d-flex","align-items-end","mb-3"],[1,"content-number","text-blue-400"],[1,"content-label"],[1,"row"],[1,"col-lg-4"],[1,"form-group"],["formControlName","companyId",1,"form-control"],["value","",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],["for","user-username"],["type","text","name","username","id","user-username","formControlName","username","autocomplete","off",1,"form-control"],["for","user-document"],["type","text","name","document","id","user-document","autocomplete","off","mask","000.000.000-00","formControlName","document",1,"form-control"],[1,"col-lg-8"],["for","user-displayName"],["type","text","name","displayName","id","user-displayName","formControlName","displayName","autocomplete","off",1,"form-control"],["for","user-gender"],["id","user-gender","formControlName","gender",1,"form-control"],[3,"static$"],["for","user-department"],["id","user-department","formControlName","departmentId",1,"form-control"],["for","user-role"],["id","user-role","formControlName","roleId",1,"form-control"],[4,"ngIf"],["class","d-flex justify-content-end",4,"ngIf","ngIfElse"],["closeOnly",""],[3,"value"],[1,"row","mt-3"],[1,"col-12"],[1,"card","p-3"],[1,"d-flex","justify-content-between"],[1,"bold-txt"],["role","button","data-toggle","collapse","href","#collapseRoleRegister","role","button","aria-expanded","false","aria-controls","collapseRoleRegister"],[3,"ngClass"],[1,"ml-3","text-gray-500",3,"icon"],["id","collapseRoleRegister",1,"collapse","permissions-card","p-3","mt-3"],["id","user-register-checkbox-tree",3,"nodes",4,"ngIf","ngIfElse"],["noPermissions",""],["id","user-register-checkbox-tree",3,"nodes"],["checkboxTree",""],[1,"text-gray-300"],[1,"d-flex","justify-content-end"],[1,"btn","btn-outline-light-atb",3,"click"],["type","submit","form","user-register-form",1,"btn","btn-primary-atb","ml-3"]],template:function(t,s){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-breadcrumb",3),e.NdJ("closeModal",function(){return s.dialogRef.close()}),e.qZA(),e.TgZ(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return s.submit()}),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"span",9),e._uU(10," 1 "),e.qZA(),e.TgZ(11,"span",10),e._uU(12,"Selecione a cooperativa"),e.qZA()()()(),e.TgZ(13,"div",11)(14,"div",12)(15,"div",13)(16,"select",14)(17,"option",15),e._uU(18,"Selecione"),e.qZA(),e.YNc(19,oe,2,2,"option",16),e.qZA()()()(),e.TgZ(20,"div",6)(21,"div",7)(22,"div",8)(23,"span",9),e._uU(24," 2 "),e.qZA(),e.TgZ(25,"span",10),e._uU(26,"Crie o nome do usu\xe1rio"),e.qZA()()()(),e.TgZ(27,"div",11)(28,"div",12)(29,"div",13)(30,"label",17),e._uU(31,"Nome de usu\xe1rio"),e.qZA(),e._UZ(32,"input",18),e.qZA()()(),e.TgZ(33,"div",6)(34,"div",7)(35,"div",8)(36,"span",9),e._uU(37," 3"),e.qZA(),e.TgZ(38,"span",10),e._uU(39,"Preencha os dados pessoais"),e.qZA()()()(),e.TgZ(40,"div",11)(41,"div",12)(42,"div",13)(43,"label",19),e._uU(44,"CPF"),e.qZA(),e._UZ(45,"input",20),e.qZA()(),e.TgZ(46,"div",21)(47,"div",13)(48,"label",22),e._uU(49,"Nome"),e.qZA(),e._UZ(50,"input",23),e.qZA()()(),e.TgZ(51,"div",11)(52,"div",12)(53,"div",13)(54,"label",24),e._uU(55,"Sexo"),e.qZA(),e.TgZ(56,"select",25)(57,"option",15),e._uU(58,"Selecione"),e.qZA(),e.YNc(59,re,2,2,"option",16),e.qZA()()()(),e.TgZ(60,"div",6)(61,"div",7)(62,"div",8)(63,"span",9),e._uU(64," 4 "),e.qZA(),e.TgZ(65,"span",10),e._uU(66,"Contato"),e.qZA()()()(),e._UZ(67,"app-contact-form",11)(68,"app-address-form",26),e.TgZ(69,"div",6)(70,"div",7)(71,"div",8)(72,"span",9),e._uU(73," 5 "),e.qZA(),e.TgZ(74,"span",10),e._uU(75,"Departamento e cargo"),e.qZA()()()(),e.TgZ(76,"div",11)(77,"div",12)(78,"div",13)(79,"label",27),e._uU(80,"Departamento"),e.qZA(),e.TgZ(81,"select",28)(82,"option",15),e._uU(83,"Selecione"),e.qZA(),e.YNc(84,ne,2,2,"option",16),e.ALo(85,"async"),e.qZA()()(),e.TgZ(86,"div",12)(87,"div",13)(88,"label",29),e._uU(89,"Cargo"),e.qZA(),e.TgZ(90,"select",30)(91,"option",15),e._uU(92,"Selecione"),e.qZA(),e.YNc(93,ae,2,2,"option",16),e.ALo(94,"async"),e.qZA()()()()(),e.YNc(95,me,22,8,"ng-container",31),e.TgZ(96,"div",6)(97,"div",7),e.YNc(98,pe,5,1,"div",32),e.YNc(99,ue,3,0,"ng-template",null,33,e.W1O),e.qZA()()()()()()),2&t){const r=e.MAs(100);e.xp6(3),e.Q6J("isModal",!0)("items",e.WLB(22,ve,e.DdM(19,ge),e.VKq(20,he,s.isEditing?"Editar usu\xe1rio":"Adicionar usu\xe1rio"))),e.xp6(2),e.Q6J("formGroup",s.form),e.xp6(12),e.Q6J("disabled",""!==s.form.value.companyId),e.xp6(2),e.Q6J("ngForOf",s.data.companies),e.xp6(38),e.Q6J("disabled",""!==s.form.value.gender),e.xp6(2),e.Q6J("ngForOf",s.data.statics.genders),e.xp6(9),e.Q6J("static$",s.static$),e.xp6(14),e.Q6J("disabled",""!==s.form.value.departmentId),e.xp6(2),e.Q6J("ngForOf",e.lcZ(85,15,s.departments$)),e.xp6(7),e.Q6J("disabled",""!==s.form.value.roleId),e.xp6(2),e.Q6J("ngForOf",e.lcZ(94,17,s.roles$)),e.xp6(2),e.Q6J("ngIf",s.data.loggedUserPermissions.viewPermissions||s.data.loggedUserPermissions.editPermissions),e.xp6(3),e.Q6J("ngIf",s.data.loggedUserPermissions.editUser)("ngIfElse",r)}},directives:[V.L,l._Y,l.JL,l.sg,b.MU,b.HK,l.EJ,b.oH,l.JJ,l.u,l.YN,l.Kr,v.sg,l.Fj,X.hx,K.p,ee.C,v.O5,v.mk,te.BN,se.D],pipes:[v.Ov],styles:[".mat-dialog-container{overflow:auto!important;padding:0}.wrapper[_ngcontent-%COMP%]{background-color:#f0f3f9;min-height:100vh;min-width:100vw;max-height:100vh;overflow-y:auto}  .cdk-overlay-pane{max-width:none!important}  .cdk-global-scrollblock{position:static;overflow:hidden!important}.container[_ngcontent-%COMP%]:first-child{padding:2rem 0}.content-number[_ngcontent-%COMP%]{color:#373a3c;font-weight:700;font-size:30px;line-height:35px}.content-label[_ngcontent-%COMP%]{font-weight:500;font-size:20px;color:#707a84;line-height:28px;margin-left:.5rem}"]}),i})();var Ue=o(676);let M=(()=>{class i{constructor(t,s,r,a,p,d){this.dialog=t,this.userRegisterService=s,this.router=r,this.route=a,this.loading=p,this.profileService=d,this.isEditing=!1,this.neededPermissions={viewPermissions:"SYSTEM_VIEW_USER_PERMISSIONS",editPermissions:"SYSTEM_SET_USER_PERMISSIONS",editUser:"SYSTEM_EDIT_USER"}}ngOnInit(){this.loading.show();const t=this.route.snapshot.params.id;(0,_.D)(Object.assign({allPermissions:this.userRegisterService.getPermissions().pipe((0,u.q)(1)),companies:this.userRegisterService.getCompanies().pipe((0,u.q)(1)),statics:this.userRegisterService.getStatics().pipe((0,u.q)(1)),loggedUserPermissions:this.profileService.checkPermissions(this.neededPermissions).pipe((0,u.q)(1))},t&&{user:this.userRegisterService.getUser(t).pipe((0,u.q)(1))})).pipe((0,u.q)(1),(0,T.x)(()=>this.loading.hide())).subscribe(s=>this.initDialog(s))}initDialog(t){this.dialog.open(fe,{height:"100vh",width:"100vw",maxWidth:"none",data:t,closeOnNavigation:!0,disableClose:!0}).afterClosed().subscribe(s=>{this.router.navigate(["app/administrativo/usuarios"])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.uw),e.Y36(Z),e.Y36(h.F0),e.Y36(h.gz),e.Y36(E.b),e.Y36(Ue.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-register"]],decls:0,vars:0,template:function(t,s){},encapsulation:2}),i})();const be=[{path:"",component:j},{path:"adicionar",component:M,data:{title:"Adicionar usu\xe1rio"}},{path:":id",component:M,data:{title:"Editar usu\xe1rio"}}];let Te=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[h.Bz.forChild(be)],h.Bz]}),i})();var Ze=o(7622),ye=o(8279),xe=o(4847),Re=o(6087),Se=o(2629);let Ne=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[v.ez,Te,Ze.m,ye.p0,xe.JX,Re.TU,Se.xc,U.ZS]]}),i})()}}]);