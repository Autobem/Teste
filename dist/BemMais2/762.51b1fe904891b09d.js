"use strict";(self.webpackChunkBemMais2=self.webpackChunkBemMais2||[]).push([[762],{762:(Te,P,s)=>{s.r(P),s.d(P,{CompaniesModule:()=>be});var f=s(9808),u=s(4521),e=s(5e3),S=s(1135),E=s(6367),U=s(8080),y=s(1629),R=s(1235),C=s(7751),v=s(6517),w=s(5214);const O=["filterInput"];function k(o,n){1&o&&(e.TgZ(0,"div",15)(1,"button",16),e._UZ(2,"i",17),e._uU(3," Adicionar "),e.qZA()())}function Y(o,n){1&o&&(e.TgZ(0,"div",18)(1,"div",19)(2,"span",20),e._uU(3,"Loading..."),e.qZA()()())}const q=function(){return["ROOT","SYSTEM_CREATE_COMPANY"]};let J=(()=>{class o extends E.K{constructor(t,i,a,r,m){super(),this.navbarService=t,this.companyService=i,this.router=a,this.route=r,this.datePipe=m,this.companies$=new S.X(null),this.columns=[{displayName:"Cooperativa",columnName:"fantasyName",hasInnerHtml:!0,cell:l=>this.socialReasonTooltip(l.fantasyName,l.companyName)},{displayName:"Representante",columnName:"representantName"},{displayName:"Data de cria\xe7\xe3o",columnName:"creation",className:"flex-25",hasInnerHtml:!0,cell:l=>this.convertDate(l.creation)}],this.actions=[{iconClass:"fas fa-pen",eventName:"edit",tooltip:"Editar cooperativa",permissions:["SYSTEM_EDIT_COMPANY","SYSTEM_VIEW_COMPANY"]},{iconClass:"fas fa-tools",eventName:"parameters",tooltip:"Exibir par\xe2metros",permissions:[]}],this.searchCompanies=l=>this.searchTableItem(l,this.companyService,this.loadTable,"searchCompanies",this.companies$,"Clique em adicionar para criar uma cooperativa","Nenhuma cooperativa encontrada"),this.navbarService.setContentTitle("Painel administrativo")}ngOnInit(){this.emptyVariable="Clique em adicionar para criar uma cooperativa",this.loadTable()}loadTable(t=0,i=10){this.initTable(this.companyService,"searchCompanies","getCompanies",this.companies$,t,i)}ngAfterViewInit(){}onSearch(t){}onAction(t){switch(t.action){case"edit":this.onEdit(t.element);break;case"lock":this.onDelete(t.element);break;case"permissions":this.openPermissions(t.element);break;case"parameters":this.openParameters(t.element)}}onDelete(t){throw Error("evento nao implementado")}onEdit(t){this.router.navigate(["./",t.id],{relativeTo:this.route})}openPermissions(t){this.router.navigate([`./${t.id}/permissoes`],{relativeTo:this.route})}openParameters(t){this.router.navigate([`./${t.id}/parametros`],{relativeTo:this.route})}addCompany(){this.router.navigate(["adicionar"],{relativeTo:this.route})}socialReasonTooltip(t,i){return`\n    <div class="tooltip-container" >\n    <div> ${t} </div>\n    <div class="tooltip-content">\n    <div class="fas fa-info-circle ml-3 custom-tooltip" style="font-size: 12px" placement="right" tooltip="Raz\xe3o social: ${i}">\n    <span class="arrow-tooltip"></span>\n    </div>\n    </div>`}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(U.I),e.Y36(y.J),e.Y36(u.F0),e.Y36(u.gz),e.Y36(f.uU))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-list-companies"]],viewQuery:function(t,i){if(1&t&&e.Gf(O,5),2&t){let a;e.iGM(a=e.CRH())&&(i.filter=a.first)}},features:[e.qOj],decls:19,vars:13,consts:[[1,"wrapper","px-0"],[1,"content-title"],[1,"card","py-3","px-1","mt-3","min-height"],[1,"w-100","h-75"],[1,"row","w-100","h-100","m-0"],[1,"col-lg-12"],[1,"table-header","mb-3","row","d-flex","align-items-center","justify-content-between"],[1,"col-4","col-lg-6"],["class","d-flex align-items-center",4,"ngxPermissionsOnly"],[1,"col-lg-3"],["src","../../../../../../assets/icons/search.svg","alt","",1,"search-icon"],["type","search","placeholder","Buscar","id","atb-search",1,"form-control","search-input",3,"ngbTypeahead"],["filterInput",""],[3,"dataSource","totalItems","columns","actions","spinner","emptyMessage","onPaginator","page","action"],["loading",""],[1,"d-flex","align-items-center"],["routerLink","adicionar",1,"btn","btn-outline-primary"],[1,"fas","fa-plus","mr-2"],[1,"d-flex","justify-content-center","w-100","align-items-center","h-100"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Cooperativas"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),e.YNc(9,k,4,0,"div",8),e.qZA(),e.TgZ(10,"div",9),e._UZ(11,"img",10)(12,"input",11,12),e.qZA()(),e.TgZ(14,"atb-table",13),e.NdJ("onPaginator",function(r){return i.paginator=r})("page",function(r){return i.loadTable(r.skip,r.take)})("action",function(r){return i.onAction(r)}),e.ALo(15,"async"),e.ALo(16,"async"),e.qZA(),e.YNc(17,Y,4,0,"ng-template",null,14,e.W1O),e.qZA()()()()()),2&t){let a,r;e.xp6(9),e.Q6J("ngxPermissionsOnly",e.DdM(12,q)),e.xp6(3),e.Q6J("ngbTypeahead",i.searchCompanies),e.xp6(2),e.Q6J("dataSource",null==(a=e.lcZ(15,8,i.companies$))?null:a.items)("totalItems",null==(r=e.lcZ(16,10,i.companies$))?null:r.total)("columns",i.columns)("actions",i.actions)("spinner",i.spinnerTable$)("emptyMessage",i.emptyVariable)}},directives:[R.gE,u.rH,C.dR,v.oH,w.a],pipes:[f.Ov],styles:[""]}),o})(),B=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-companies"]],decls:1,vars:0,template:function(t,i){1&t&&e._UZ(0,"app-list-companies")},directives:[J],styles:[""]}),o})();var h=s(8966),Z=s(1299);const j=function(){return{text:"Cooperativa"}},F=function(){return{text:"Par\xe2metros"}},L=function(o,n){return[o,n]};let $=(()=>{class o{constructor(t,i){this.dialogRef=t,this.data=i,this.isEditing=!1}ngOnInit(){}closePanel(){this.dialogRef.close()}save(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.so),e.Y36(h.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-company-parameters-dialog"]],decls:17,vars:8,consts:[[1,"wrapper","px-0"],[1,"container"],[1,"d-flex","flex-column"],[3,"isModal","items","closeModal"],[1,"card","p-5"],[1,"text-gray-500"],[1,"subtitle-sm","text-gray-600","regular-txt","mt-4","mb-1"],[1,"p-2","card","parameters-card"],[1,"row","mt-4"],[1,"col-lg-12"],[1,"d-flex","justify-content-end"],[1,"btn","btn-outline-light-atb",3,"click"],[1,"btn","btn-primary-atb","ml-3",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-breadcrumb",3),e.NdJ("closeModal",function(){return i.dialogRef.close()}),e.qZA(),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6,"Par\xe2metros da Cooperativa"),e.qZA(),e.TgZ(7,"span",6),e._uU(8,"Permiss\xf5es selecionadas"),e.qZA(),e._UZ(9,"div",7),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"button",11),e.NdJ("click",function(){return i.closePanel()}),e._uU(14,"Voltar"),e.qZA(),e.TgZ(15,"button",12),e.NdJ("click",function(){return i.save()}),e._uU(16),e.qZA()()()()()()()()),2&t&&(e.xp6(3),e.Q6J("isModal",!0)("items",e.WLB(5,L,e.DdM(3,j),e.DdM(4,F))),e.xp6(13),e.hij(" ",i.isEditing?"Confirmar":"Cadastrar"," "))},directives:[Z.L],styles:[".mat-dialog-container{overflow:auto!important;padding:0}.wrapper[_ngcontent-%COMP%]{background-color:#f0f3f9;min-height:100vh;min-width:100vw;max-height:100vh;overflow-y:auto}  .cdk-overlay-pane{max-width:none!important}  .cdk-global-scrollblock{position:static;overflow:hidden!important}.container[_ngcontent-%COMP%]:first-child{padding:2rem 0}.parameters-card[_ngcontent-%COMP%]{min-height:40vh;max-height:40vh;overflow-y:auto}"]}),o})(),Q=(()=>{class o{constructor(t,i){this.dialog=t,this.router=i}ngOnInit(){this.dialog.open($,{height:"100vh",width:"100vw",maxWidth:"none",disableClose:!0,closeOnNavigation:!0}).afterClosed().subscribe(t=>{this.router.navigate(["app/administrativo/cooperativas"])})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.uw),e.Y36(u.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-company-parameters"]],decls:2,vars:0,template:function(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"company-parameters works!"),e.qZA())},styles:[""]}),o})();var z=s(7579),V=s(4128),b=s(5698),x=s(2722),N=s(8746),c=s(3075),W=s(801),A=s(6779),H=s(8306);function _(o,n){if(n.length<o)throw new TypeError(o+" argument"+(o>1?"s":"")+" required, but only "+n.length+" present")}function D(o){_(1,arguments);var n=Object.prototype.toString.call(o);return o instanceof Date||"object"==typeof o&&"[object Date]"===n?new Date(o.getTime()):"number"==typeof o||"[object Number]"===n?new Date(o):(("string"==typeof o||"[object String]"===n)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}var p=s(97),X=s(2498),K=s(2290),I=s(2569),ee=s(1470),te=s(3915),oe=s(1644),ie=s(9444),ne=s(6607);const ae=["checkboxTree"];function se(o,n){if(1&o&&e._UZ(0,"checkbox-tree",41,42),2&o){const t=e.oxw();e.Q6J("nodes",t.permissionNodes)}}function re(o,n){1&o&&(e.TgZ(0,"span",43),e._uU(1,"N\xe3o existem permiss\xf5es de cargo cadastradas."),e.qZA())}function le(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",44)(1,"button",45),e.NdJ("click",function(){return e.CHM(t),e.oxw().closePanel()}),e._uU(2," Cancelar "),e.qZA(),e.TgZ(3,"button",46),e._uU(4),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(4),e.hij(" ",t.isEditing?"Confirmar":"Cadastrar"," ")}}function ce(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",44)(1,"button",45),e.NdJ("click",function(){return e.CHM(t),e.oxw().closePanel()}),e._uU(2," Fechar "),e.qZA()()}}const me=function(){return{text:"Cooperativas"}},de=function(o){return{text:o}},pe=function(o,n){return[o,n]},ue=function(o,n){return{"text-gray-300":o,"text-green-200":n}};let ge=(()=>{class o extends X.o{constructor(t,i,a,r,m,l,d,g){super(d,g),this.dialogRef=t,this.data=i,this.companyService=a,this.toastrService=r,this.cdRef=m,this.loading=l,this.injetor=d,this.modalService=g,this.faChevronRight=W._tD,this.isEditing=!1,this.permissionNodes=[],this.selectedPermissionsNodes=[],this.selectedPermissions=[],this.todayDate=new Date,this.static$=new H.y}ngOnInit(){this.static$=this.companyService.getCompaniesStaticData(),this.form=this.formBuilder.group({id:null,document:["",c.kI.required],companyName:["",c.kI.required],fantasyName:["",c.kI.required],stateRegistration:["",c.kI.required],contacts:this.formBuilder.array([this.formBuilder.group({id:[],types:[["Mobile"]],contact:["",[c.kI.required,(0,p.tH)()]],description:["Mobile1"]}),this.formBuilder.group({id:[],types:[["Phone"]],contact:["",[(0,p.tH)()]],description:["Phone1"]}),this.formBuilder.group({id:[],types:[["Email"]],contact:["",[c.kI.required,(0,p.Le)()]],description:["Email1"]}),this.formBuilder.group({id:[],types:[["Email"]],contact:["",[(0,p.Le)()]],description:["Email2"]})]),addresses:this.formBuilder.array([this.formBuilder.group({id:[],clientId:[null],description:["main"],streetName:[null,[c.kI.required,(0,p.Bp)()]],number:[null,[c.kI.required,(0,p.rE)()]],complement:[null,[(0,p.Bp)()]],neighborhood:[null,[c.kI.required,(0,p.Bp)()]],city:[null,[c.kI.required,(0,p.C$)()]],federationUnit:[null,[c.kI.required]],zipCode:[null,[c.kI.required]]})]),creation:[(new Date).toISOString().split("T")[0],[c.kI.required,this.dateValidator]],representantName:["",c.kI.required],representantDocument:["",c.kI.required]}),(this.data.loggedUserPermissions.viewPermissions||this.data.loggedUserPermissions.editPermissions)&&(this.permissionNodes=this.setTreeData(this.data.allPermissions),this.data.loggedUserPermissions.editPermissions||(this.selectedPermissions=[],this.checkboxTree.disableTree())),this.data.company&&(this.isEditing=!0,this.fillForm())}ngAfterViewInit(){var t;this.checkboxTree.tree.treeModel.subscribeToState(()=>{var i,a,r,m;for(const l of Object.keys((0,A.ZN)(this.checkboxTree.tree.treeModel.selectedLeafNodeIds)))1==(0,A.ZN)(this.checkboxTree.tree.treeModel.selectedLeafNodeIds)[l]?-1==this.selectedPermissions.indexOf(null===(a=null===(i=this.checkboxTree.tree.treeModel.getNodeById(l))||void 0===i?void 0:i.data)||void 0===a?void 0:a.id)&&this.selectedPermissions.push(null===(m=null===(r=this.checkboxTree.tree.treeModel.getNodeById(l))||void 0===r?void 0:r.data)||void 0===m?void 0:m.id):this.selectedPermissions=this.selectedPermissions.filter(d=>{var g,T;return d!==(null===(T=null===(g=this.checkboxTree.tree.treeModel.getNodeById(l))||void 0===g?void 0:g.data)||void 0===T?void 0:T.id)})}),(null===(t=this.data.company)||void 0===t?void 0:t.permissions)&&(this.data.loggedUserPermissions.viewPermissions||this.data.loggedUserPermissions.editPermissions)&&this.data.company.permissions.forEach(i=>{const a=this.checkboxTree.tree.treeModel.getNodeById(i);null==a||a.setIsSelected(!0)}),(this.data.loggedUserPermissions.viewPermissions||this.data.loggedUserPermissions.editPermissions)&&(this.data.loggedUserPermissions.editPermissions||(this.checkboxTree.tree.treeModel.expandAll(),this.checkboxTree.disableTree())),this.cdRef.detectChanges()}dateValidator(t){return t.value&&function G(o,n){_(2,arguments);var t=D(o),i=D(n);return t.getTime()>i.getTime()}(new Date(t.value),new Date)?{invalidDate:!0}:null}fillForm(){var t,i,a,r,m,l,d;this.data.company.permissions&&(this.selectedPermissions=this.data.company.permissions),this.form.patchValue({id:null===(t=this.data.company)||void 0===t?void 0:t.id,companyName:null===(i=this.data.company)||void 0===i?void 0:i.companyName,creation:new Date(this.data.company.creation).toISOString().split("T")[0],fantasyName:null===(a=this.data.company)||void 0===a?void 0:a.fantasyName,stateRegistration:null===(r=this.data.company)||void 0===r?void 0:r.stateRegistration,representantName:null===(m=this.data.company)||void 0===m?void 0:m.representantName,representantDocument:null===(l=this.data.company)||void 0===l?void 0:l.representantDocument,document:null===(d=this.data.company)||void 0===d?void 0:d.document,contacts:this.patchArrayContacts(this.data.company.contacts),address:this.patchArrayAddresses(this.data.company.addresses)}),this.data.loggedUserPermissions.editCompany||Object.keys(this.form.controls).forEach(g=>{this.form.controls[g].disable({emitEvent:!1})})}setTreeData(t){return function i(a=t){return a.map(r=>({id:r.id,name:r.displayName,children:function(){var m,l;let d=[];return(null===(m=r.permissions)||void 0===m?void 0:m.length)&&(d=[...d,...i(r.permissions)]),(null===(l=r.childrenGroups)||void 0===l?void 0:l.length)&&(d=[...d,...i(r.childrenGroups)]),d}()}))}()}closePanel(){this.dialogRef.close()}submit(){if(this.form.valid){this.loading.show();const t=Object.assign({},this.form.value);t.contacts=t.contacts.filter(a=>""!=a.contact),t.permissions=this.selectedPermissions,this.companyService[this.isEditing?"editCompany":"saveCompany"](t).pipe((0,N.x)(()=>this.loading.hide())).subscribe(a=>{this.toastrService.show(`Cooperativa ${this.isEditing?"alterada":"criada"} com sucesso!`,"title",{toastClass:"success-toast"}),this.dialogRef.close()})}else this.form.markAllAsTouched(),this.markAllAsDirty(this.form),this.toastrService.show("Formul\xe1rio inv\xe1lido! Verifique os campos e tente novamente!","title",{toastClass:"error-toast"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.so),e.Y36(h.WI),e.Y36(y.J),e.Y36(K._W),e.Y36(e.sBO),e.Y36(I.b),e.Y36(e.zs3),e.Y36(C.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-company-register-dialog"]],viewQuery:function(t,i){if(1&t&&e.Gf(ae,5),2&t){let a;e.iGM(a=e.CRH())&&(i.checkboxTree=a.first)}},features:[e.qOj],decls:87,vars:20,consts:[[1,"wrapper","px-0"],[1,"container"],[1,"d-flex","flex-column"],[3,"isModal","items","closeModal"],[1,"card","p-5"],["id","company-register-form",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-12"],[1,"d-flex","align-items-end","mb-3"],[1,"content-number","text-blue-400"],[1,"content-label"],[1,"col-lg-4"],[1,"form-group"],["for","company-cnpj"],["type","text","mask","00.000.000/0000-00","id","company-cnpj","formControlName","document",1,"form-control"],[1,"col-lg-8"],["for","company-companyName"],["type","text","id","company-companyName","formControlName","companyName",1,"form-control"],["for","company-creation"],["type","date","placeholder","","id","company-creation","formControlName","creation",1,"form-control"],["for","company-fantasyName"],["type","text","id","company-fantasyName","formControlName","fantasyName",1,"form-control"],["type","text","mask","000.000.000-00","id","company-representantDocument","formControlName","representantDocument",1,"form-control"],["for","company-representantName"],["type","text","id","company-representantName","formControlName","representantName",1,"form-control"],["for","company-stateRegistration"],["type","number","id","company-stateRegistration","formControlName","stateRegistration",1,"form-control"],[1,"row","mt-4"],[3,"static$"],[1,"col-12"],[1,"card","p-3"],[1,"d-flex","justify-content-between"],[1,"bold-txt"],["role","button","data-toggle","collapse","href","#collapseCompanyPermissions","role","button","aria-expanded","false","aria-controls","collapseCompanyPermissions"],[3,"ngClass"],[1,"ml-3","text-gray-500",3,"icon"],["id","collapseCompanyPermissions",1,"collapse","permissions-card","p-3","mt-3"],["id","company-register-checkbox-tree",3,"nodes",4,"ngIf","ngIfElse"],["noPermissions",""],["class","d-flex justify-content-end",4,"ngIf","ngIfElse"],["closeOnly",""],["id","company-register-checkbox-tree",3,"nodes"],["checkboxTree",""],[1,"text-gray-300"],[1,"d-flex","justify-content-end"],[1,"btn","btn-outline-light-atb",3,"click"],["type","submit","form","company-register-form",1,"btn","btn-primary-atb","ml-3"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-breadcrumb",3),e.NdJ("closeModal",function(){return i.dialogRef.close()}),e.qZA(),e.TgZ(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return i.submit()}),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"span",9),e._uU(10," 1 "),e.qZA(),e.TgZ(11,"span",10),e._uU(12,"Preencha os dados da cooperativa"),e.qZA()()()(),e.TgZ(13,"div",6)(14,"div",11)(15,"div",12)(16,"label",13),e._uU(17,"CNPJ"),e.qZA(),e._UZ(18,"input",14),e.qZA()(),e.TgZ(19,"div",15)(20,"div",12)(21,"label",16),e._uU(22,"Raz\xe3o social"),e.qZA(),e._UZ(23,"input",17),e.qZA()()(),e.TgZ(24,"div",6)(25,"div",11)(26,"div",12)(27,"label",18),e._uU(28,"Data de cria\xe7\xe3o"),e.qZA(),e._UZ(29,"input",19),e.qZA()(),e.TgZ(30,"div",15)(31,"div",12)(32,"label",20),e._uU(33,"Nome fantasia"),e.qZA(),e._UZ(34,"input",21),e.qZA()()(),e.TgZ(35,"div",6)(36,"div",11)(37,"div",12)(38,"label",18),e._uU(39,"CPF"),e.qZA(),e._UZ(40,"input",22),e.qZA()(),e.TgZ(41,"div",15)(42,"div",12)(43,"label",23),e._uU(44,"Nome do representante"),e.qZA(),e._UZ(45,"input",24),e.qZA()()(),e.TgZ(46,"div",6)(47,"div",11)(48,"div",12)(49,"label",25),e._uU(50,"Inscri\xe7\xe3o estadual"),e.qZA(),e._UZ(51,"input",26),e.qZA()()(),e.TgZ(52,"div",27)(53,"div",7)(54,"div",8)(55,"span",9),e._uU(56," 2 "),e.qZA(),e.TgZ(57,"span",10),e._uU(58,"Contato"),e.qZA()()()(),e._UZ(59,"app-contact-form",6)(60,"app-address-form",28),e.qZA(),e.TgZ(61,"div",27)(62,"div",7)(63,"div",8)(64,"span",9),e._uU(65," 3 "),e.qZA(),e.TgZ(66,"span",10),e._uU(67,"Selecione as permiss\xf5es"),e.qZA()()()(),e.TgZ(68,"div",27)(69,"div",29)(70,"div",30)(71,"div",31)(72,"span",32),e._uU(73,"Permiss\xf5es avan\xe7adas"),e.qZA(),e.TgZ(74,"a",33)(75,"span",34),e._uU(76),e.qZA(),e._UZ(77,"fa-icon",35),e.qZA()(),e.TgZ(78,"div",36),e.YNc(79,se,2,1,"checkbox-tree",37),e.YNc(80,re,2,0,"ng-template",null,38,e.W1O),e.qZA()()()(),e.TgZ(82,"div",27)(83,"div",7),e.YNc(84,le,5,1,"div",39),e.YNc(85,ce,3,0,"ng-template",null,40,e.W1O),e.qZA()()()()()()),2&t){const a=e.MAs(81),r=e.MAs(86);e.xp6(3),e.Q6J("isModal",!0)("items",e.WLB(14,pe,e.DdM(11,me),e.VKq(12,de,i.isEditing?"Editar cooperativa":"Adicionar cooperativa"))),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(55),e.Q6J("static$",i.static$),e.xp6(15),e.Q6J("ngClass",e.WLB(17,ue,0===i.selectedPermissions.length,i.selectedPermissions.length>0)),e.xp6(1),e.Oqu(0===i.selectedPermissions.length?"Nenhuma atribu\xedda":1===i.selectedPermissions.length?"1 atribu\xedda":i.selectedPermissions.length+" atribu\xeddas"),e.xp6(1),e.Q6J("icon",i.faChevronRight),e.xp6(2),e.Q6J("ngIf",i.permissionNodes.length)("ngIfElse",a),e.xp6(5),e.Q6J("ngIf",i.data.loggedUserPermissions.editCompany)("ngIfElse",r)}},directives:[Z.L,c._Y,c.JL,c.sg,v.MU,v.HK,ee.hx,c.Fj,v.oH,c.JJ,c.u,c.wV,te.p,oe.C,f.mk,ie.BN,f.O5,ne.D],styles:[".mat-dialog-container{overflow:auto!important;padding:0}.wrapper[_ngcontent-%COMP%]{background-color:#f0f3f9;min-height:100vh;min-width:100vw;max-height:100vh;overflow-y:auto}  .cdk-overlay-pane{max-width:none!important}  .cdk-global-scrollblock{position:static;overflow:hidden!important}.container[_ngcontent-%COMP%]:first-child{padding:2rem 0}.content-number[_ngcontent-%COMP%]{color:#373a3c;font-weight:700;font-size:30px;line-height:35px}.content-label[_ngcontent-%COMP%]{font-weight:500;font-size:20px;color:#707a84;line-height:28px;margin-left:.5rem}"]}),o})();var he=s(676);let M=(()=>{class o{constructor(t,i,a,r,m,l){this.dialog=t,this.router=i,this.route=a,this.companyService=r,this.loading=m,this.profileService=l,this.destroyed$=new z.x,this.neededPermissions={viewPermissions:"SYSTEM_VIEW_COMPANY_PERMISSIONS",editPermissions:"SYSTEM_SET_COMPANY_PERMISSIONS",editCompany:"SYSTEM_EDIT_COMPANY"}}ngOnInit(){this.loading.show();const t=this.route.snapshot.params.id;(0,V.D)(Object.assign({allPermissions:this.companyService.getPermissions().pipe((0,b.q)(1)),loggedUserPermissions:this.profileService.checkPermissions(this.neededPermissions).pipe((0,b.q)(1))},t&&{company:this.companyService.getCompanyById(t).pipe((0,b.q)(1))})).pipe((0,x.R)(this.destroyed$),(0,N.x)(()=>this.loading.hide())).subscribe(i=>{this.initDialog(i)})}initDialog(t){this.dialogRef=this.dialog.open(ge,{height:"100vh",width:"100vw",maxWidth:"none",data:t,closeOnNavigation:!0,disableClose:!0}).afterClosed().pipe((0,x.R)(this.destroyed$)).subscribe(i=>{this.router.navigate(["app/administrativo/cooperativas"])})}ngOnDestroy(){this.destroyed$.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.uw),e.Y36(u.F0),e.Y36(u.gz),e.Y36(y.J),e.Y36(I.b),e.Y36(he.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-company-register"]],decls:0,vars:0,template:function(t,i){},styles:[""]}),o})();const fe=[{path:"",component:B},{path:"adicionar",component:M,data:{title:"Adicionar cooperativa"}},{path:":id",component:M,data:{title:"Editar cooperativa"}},{path:":id/parametros",component:Q,data:{title:"Par\xe2metros"}}];let ve=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.Bz.forChild(fe)],u.Bz]}),o})();var ye=s(7622),Ce=s(2629);let be=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.ez,ve,ye.m,Ce.xc,C.ZS]]}),o})()}}]);