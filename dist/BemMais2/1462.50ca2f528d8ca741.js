(self.webpackChunkBemMais2=self.webpackChunkBemMais2||[]).push([[1462],{581:(Ze,se,b)=>{"use strict";b.d(se,{_:()=>le});var e=b(520),J=b(1135),S=b(7579),K=b(5698),ie=b(8505),q=b(262),V=b(2843),Q=b(8746),z=b(9300),Y=b(7414),u=b(5e3),m=b(8966),j=b(779),L=b(1377);let le=(()=>{class ne{constructor(C,T,Z){this.dialog=C,this.inspectionAnalysisService=T,this.inspectionService=Z,this.uploadLoading$=new J.X(!1),this.uploadComplete$=new S.x,this.inspection$=new J.X({})}loadInspectionTable(C=0,T=10){return this.inspectionService.getInspectionList(C,T).pipe((0,K.q)(1),(0,ie.b)(Z=>this.inspection$.next(Z)))}searchDataInspection(C){return this.inspectionService.searchInspection(C).pipe((0,K.q)(1),(0,ie.b)(T=>this.inspection$.next(T)))}fillPictures(C){C.forEach((T,Z,P)=>{T.src||(T.downloadError=!1,T.token&&(T.loading=!0,this.inspectionAnalysisService.getPicture(T.token).pipe((0,q.K)(N=>(T.downloadError=!0,(0,V._)(()=>new Error(N)))),(0,K.q)(1),(0,Q.x)(()=>{T.loading=!1})).subscribe(N=>{N&&(T.fileName=N.fileName,T.isPdf="pdf"===N.extension,T.src="data:"+N.mediaType+";base64,"+N.data)})))})}fillAllPictures(C){var T;this.fillPictures((null==C?void 0:C.pictures)||[]),null===(T=null==C?void 0:C.equipments)||void 0===T||T.forEach(Z=>{const P=null==Z?void 0:Z.pictures;console.log("equipment",Z),(null==P?void 0:P.length)&&this.fillPictures(P)})}handleFileInput({file:C,type:T,subType:Z,item:P,asset:N,equipment:ce}){var ye;if(null===(ye=null==C?void 0:C.files[0])||void 0===ye?void 0:ye.name){P.extensionError="",P.uploadError=!1,P.progress=0,this.uploadLoading$.next(!0);const _e=C.files[0],$=_e.name.slice(_e.name.lastIndexOf(".")),fe=P.document?/(\.jpg|\.jpeg|\.png|\.bmp|\.pdf)$/i:/(\.jpg|\.jpeg|\.png|\.bmp)$/i,ue=new FormData;ue.append("files",_e,_e.name);let pe=new e.WM({Type:T});if(Z&&(pe=pe.append(T,Z)),N&&(pe=pe.append("AssetType",N.assetType).append("AutoType",(null==ce?void 0:ce.autoType)||N.autoType).append("AssetId",(null==ce?void 0:ce.id)||N.id)),ce&&(pe=pe.append("HostType",N.autoType)),fe.test($)){let de=50;const ge=()=>{P.progress>50&&P.progress<70&&(de=500),P.progress>70&&P.progress<80&&(de=1e3),P.progress>80&&P.progress<90&&(de=3e3),P.progress>90&&P.progress<99&&(de=5e3),P.progress<99&&(P.progress++,clearInterval(E),E=setInterval(ge,de))};let E=setInterval(ge,de);this.inspectionAnalysisService.upload(ue,pe).pipe((0,z.h)(G=>G.type==e.dt.UploadProgress)).pipe((0,K.q)(1),(0,Y.V)(2e4),(0,q.K)(G=>(clearInterval(E),P.progress=0,P.uploadError=!0,this.uploadLoading$.next(!1),(0,V._)(()=>new Error(G))))).subscribe(G=>{P.token=G.token,this.updatePhoto(P,E)})}else this.uploadLoading$.next(!1),P.progress=0,P.extensionError=$}}updatePhoto(C,T){this.inspectionAnalysisService.getPicture(C.token).pipe((0,q.K)(Z=>(C.downloadError=!0,C.src="",(0,V._)(()=>new Error(Z)))),(0,K.q)(1),(0,Q.x)(()=>{clearInterval(T)})).subscribe(Z=>{C.progress=100,setTimeout(()=>{C.progress=101,this.uploadLoading$.next(!1),Z&&(this.uploadComplete$.next(),C.fileName=Z.fileName,C.isPdf="pdf"===Z.extension,C.src="data:"+Z.mediaType+";base64,"+Z.data)},500)})}}return ne.\u0275fac=function(C){return new(C||ne)(u.LFG(m.uw),u.LFG(j.z),u.LFG(L.a))},ne.\u0275prov=u.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})()},8844:(Ze,se,b)=>{"use strict";var e;b.d(se,{$N:()=>J,$P:()=>Y,E3:()=>S,M9:()=>ie,_P:()=>V,ev:()=>e,h9:()=>Q,y:()=>q}),e||(e={});var J=(()=>{return(u=J||(J={})).Pending="Pending",u.AwaitingAnalysis="AwaitingAnalysis",u.UnderReview="UnderReview",u.Approved="Approved",u.PartiallyApproved="PartiallyApproved",u.Reproved="Reproved",u.Expired="Expired",u.Cancelled="Cancelled",J;var u})(),S=(()=>{return(u=S||(S={})).Pending="Pendente",u.AwaitingAnalysis="Aguardando an\xe1lise",u.UnderReview="Em an\xe1lise",u.Approved="Aprovada",u.PartiallyApproved="Parcialmente aprovada",u.Reproved="Reprovada",u.Expired="Expirada",u.Cancelled="Cancelada",S;var u})(),ie=(()=>{return(u=ie||(ie={})).RG="RG",u.SR="Raz\xe3o Social",u.CPF="CPF",u.CNPJ="CNPJ",u.CRLV="CRLV",u.ProofOfResidence="Comprovante de resid\xeancia",u.SocialContract="Contrato social",u.Panel="Painel",u.Tachograph="Tac\xf3grafo",u.Front="Frente",u.Rear="Traseira",u.Left="Esquerda",u.Right="Direita",u.Chassis="Chassi",u.SerialNumber="N\xfamero de s\xe9rie",u.Invoice="Nota fiscal",ie;var u})(),q=(()=>{return(u=q||(q={})).Document="Document",u.Picture="Picture",q;var u})(),V=(()=>{return(u=V||(V={})).Document="Document",u.Picture="Picture",u.Inspection="Inspection",V;var u})(),Q=(()=>{return(u=Q||(Q={})).Approve="Approve",u.Reprove="Reprove",Q;var u})(),Y=(()=>{return(u=Y||(Y={})).Adhesion="Ades\xe3o",u.Renewal="Renova\xe7\xe3o",u.Endorsement="Endosso",Y;var u})()},779:(Ze,se,b)=>{"use strict";b.d(se,{z:()=>Q});var e=b(2340),J=b(520),S=b(8550),K=b(3743),ie=b(5871),q=b(5e3),V=b(2569);let Q=(()=>{class z{constructor(u,m,j){this.http=u,this.loading=m,this.injector=j,this.httpSkip=(0,S.d)(this.injector,[K.z,ie.n])}getInspectionAnalysis(u,m){return this.http.get(`${e.N.baseURL}/commercial/inspection/analysis/${u}/${m}`)}getInspectionAnalysisById(u){return this.http.get(`${e.N.baseURL}/commercial/inspection/analysis/${u}`)}getInspectionAnalysisAssets(u,m,j){return this.http.get(`${e.N.baseURL}/commercial/inspection/analysis/${j}/assets/${u}/${m}`)}getAnalisisDetails(u,m){return this.http.post(`${e.N.baseURL}/commercial/inspection/analysis/${u}/details`,m)}getStatic(){return this.http.get(`${e.N.baseURL}/commercial/inspection/analysis/static`)}getInspectionTags(u){return this.http.get(`${e.N.baseURL}/commercial/inspection/analysis/${u}/tags`)}getAttachments(u){return this.http.get(`${e.N.baseURL}/commercial/inspection/analysis/${u}/attachments`)}getHistoric(u){return this.http.get(`${e.N.baseURL}/commercial/inspection/analysis/${u}/historic`)}submitInspect(u,m){return this.http.post(`${e.N.baseURL}/commercial/inspection/analysis/${u}/inspect`,m)}addTag(u,m){return this.http.post(`${e.N.baseURL}/commercial/inspection/analysis/${u}/tags/add`,m)}removeTag(u,m){return this.http.delete(`${e.N.baseURL}/commercial/inspection/analysis/${u}/tags/remove`,{body:m})}searchInspectionAnalysis(u,m,j){return this.http.post(`${e.N.baseURL}/commercial/inspection/analysis/search`,{term:u,skip:m,take:j,precise:!1})}searchInspectionAnalysisAsset(u,m,j,L){return this.http.post(`${e.N.baseURL}/commercial/inspection/analysis/${u}/assets/search`,{identifier:m,skip:j,take:L,precise:!0})}getPicture(u){const m=(new J.WM).set("Authorization",`Bearer ${u}`);return this.httpSkip.get(`${e.N.baseURL}/files/inspection/file`,{headers:m})}inspect(u,m){return this.http.post(`${e.N.baseURL}/commercial/inspection/analysis/${u}/inspect`,m)}upload(u,m){return this.http.post(`${e.N.baseURL}/commercial/proponent/inspections/upload`,u,{headers:m,responseType:"blob",reportProgress:!0,observe:"events"})}}return z.\u0275fac=function(u){return new(u||z)(q.LFG(J.eN),q.LFG(V.b),q.LFG(q.zs3))},z.\u0275prov=q.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})()},4231:(Ze,se,b)=>{"use strict";b.d(se,{j:()=>X});var e=b(5e3),J=b(1094),S=b(8844),K=b(8966),ie=b(3760),q=b.n(ie),V=b(1135),Q=b(727),z=b(4968),Y=b(8512),u=b(8663),m=b(5698),j=b(8746),L=b(3075),le=b(779),ne=b(676),H=b(9808),C=b(2490),T=b(6517),Z=b(1470);const P=function(){return{width:"auto",minHeight:"81vh"}};function N(s,v){if(1&s){const i=e.EpF();e.TgZ(0,"pdf-viewer",24),e.NdJ("pageChange",function(p){return e.CHM(i),e.oxw(2).pdfPage=p})("after-load-complete",function(p){return e.CHM(i),e.oxw(2).afterLoadComplete(p)})("pages-initialized",function(p){return e.CHM(i),e.oxw(2).pagesInitialized(p)}),e.ALo(1,"async"),e.qZA()}if(2&s){const i=e.oxw(2);e.Udp("--pdf-zoom",e.lcZ(1,13,i.pdfZoom)),e.s9C("src",null==i.data.item?null:i.data.item.src),e.Q6J("rotation",i.pdfRotation)("autoresize",!0)("page",i.pdfPage)("render-text",!0)("show-all",!1)("zoom",.9)("zoom-scale","page-fit")("external-link-target","blank")("original-size",!1)("ngStyle",e.DdM(15,P))}}function ce(s,v){if(1&s){const i=e.EpF();e.ynx(0),e.YNc(1,N,2,16,"pdf-viewer",12),e.ALo(2,"async"),e.TgZ(3,"div",13)(4,"button",14),e.NdJ("click",function(){return e.CHM(i),e.oxw().pdfActions("zoomIn")}),e._UZ(5,"i",15),e.qZA(),e.TgZ(6,"button",16),e.NdJ("click",function(){return e.CHM(i),e.oxw().pdfActions("zoomOut")}),e._UZ(7,"i",17),e.qZA(),e.TgZ(8,"button",14),e.NdJ("click",function(){return e.CHM(i),e.oxw().pdfActions()}),e._UZ(9,"i",18),e.qZA(),e.TgZ(10,"button",16),e.NdJ("click",function(){return e.CHM(i),e.oxw().pdfActions("previousPage")}),e._UZ(11,"i",19),e.qZA(),e.TgZ(12,"span",20),e._uU(13),e.qZA(),e.TgZ(14,"button",16),e.NdJ("click",function(){return e.CHM(i),e.oxw().pdfActions("nextPage")}),e._UZ(15,"i",21),e.qZA(),e.TgZ(16,"button",14),e.NdJ("click",function(){return e.CHM(i),e.oxw().pdfActions("rotateOut")}),e._UZ(17,"i",22),e.qZA(),e.TgZ(18,"button",14),e.NdJ("click",function(){return e.CHM(i),e.oxw().pdfActions("rotateIn")}),e._UZ(19,"i",23),e.qZA()(),e.BQk()}if(2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,5,i.pdfViewerVisible)),e.xp6(5),e.Q6J("disabled",i.pdfZoom.getValue()<=.2),e.xp6(4),e.Q6J("disabled",i.pdfPage<=1),e.xp6(3),e.Oqu(i.pdfPage),e.xp6(1),e.Q6J("disabled",i.pdfPage>=i.pdfNumPages)}}function ye(s,v){if(1&s&&e._UZ(0,"img",25),2&s){const i=e.oxw();e.s9C("src",null==i.data.item?null:i.data.item.src,e.LSH),e.Q6J("hidden",!0)}}function _e(s,v){1&s&&(e.TgZ(0,"div",29)(1,"div",30)(2,"span",31),e._uU(3,"Loading..."),e.qZA()()())}function $(s,v){if(1&s&&(e.TgZ(0,"span",39),e._uU(1," Tipo de carga "),e.TgZ(2,"strong",38),e._uU(3),e.qZA()()),2&s){const i=e.oxw(5);e.xp6(3),e.Oqu(i.viewData.cargoType)}}function fe(s,v){if(1&s&&(e.TgZ(0,"span",39),e._uU(1," Prote\xe7\xe3o da carroceria "),e.TgZ(2,"strong",38),e._uU(3),e.qZA()()),2&s){const i=e.oxw(5);e.xp6(3),e.hij(" ",i.viewData.protectBody?"Sim":"N\xe3o"," ")}}function ue(s,v){if(1&s&&(e.TgZ(0,"span",39),e._uU(1," Tipo de carroceria "),e.TgZ(2,"strong",38),e._uU(3),e.qZA()()),2&s){const i=e.oxw(5);e.xp6(3),e.hij(" ",i.viewData.bodyType," ")}}function pe(s,v){if(1&s&&(e.TgZ(0,"span",39),e._uU(1," Valor declarado da carroceria "),e.TgZ(2,"strong",38),e._uU(3),e.ALo(4,"currency"),e.qZA()()),2&s){const i=e.oxw(5);e.xp6(3),e.hij(" ",e.xi3(4,1,i.viewData.bodyValue,"BRL")," ")}}function de(s,v){if(1&s&&(e.TgZ(0,"span",39),e._uU(1," Eixo adicional "),e.TgZ(2,"strong",38),e._uU(3),e.qZA()()),2&s){const i=e.oxw(5);e.xp6(3),e.hij(" ",i.viewData.protectAdditionalAxle?"Sim":"N\xe3o"," ")}}function ge(s,v){if(1&s&&(e.TgZ(0,"span",39),e._uU(1," Valor do eixo adicional "),e.TgZ(2,"strong",38),e._uU(3),e.ALo(4,"currency"),e.qZA()()),2&s){const i=e.oxw(5);e.xp6(3),e.hij(" ",e.xi3(4,1,i.viewData.additionalAxleValue,"BRL")," ")}}function E(s,v){if(1&s&&(e.TgZ(0,"span",39),e._uU(1," Empresa respons\xe1vel "),e.TgZ(2,"strong",38),e._uU(3),e.qZA()()),2&s){const i=e.oxw(5);e.xp6(3),e.hij(" ",i.viewData.securityDeviceCompanyName," ")}}function G(s,v){if(1&s&&(e.TgZ(0,"span",39),e._uU(1," Contato da empresa "),e.TgZ(2,"strong",38),e._uU(3),e.qZA()()),2&s){const i=e.oxw(5);e.xp6(3),e.hij(" ",i.viewData.securityDeviceCompanyContact," ")}}function Ne(s,v){if(1&s&&(e.ynx(0),e.TgZ(1,"h3",49),e._uU(2,"Dados do Bem"),e.qZA(),e.TgZ(3,"div",50)(4,"div",51)(5,"div",52)(6,"span",39),e._uU(7," Nome do propriet\xe1rio "),e.TgZ(8,"strong",38),e._uU(9),e.qZA()(),e.TgZ(10,"span",53),e._uU(11," CPF/CNPJ "),e.TgZ(12,"strong",38),e._uU(13),e.ALo(14,"mask"),e.qZA()()(),e.TgZ(15,"span",39),e._uU(16," Placa "),e.TgZ(17,"strong",38),e._uU(18),e.qZA()(),e.TgZ(19,"span",39),e._uU(20," Tipo de ve\xedculo "),e.TgZ(21,"strong",38),e._uU(22),e.qZA()(),e.TgZ(23,"span",39),e._uU(24," Marca "),e.TgZ(25,"strong",38),e._uU(26),e.qZA()(),e.TgZ(27,"span",39),e._uU(28," Modelo "),e.TgZ(29,"strong",38),e._uU(30),e.qZA()(),e.TgZ(31,"span",39),e._uU(32," Ano / Modelo "),e.TgZ(33,"strong",38),e._uU(34),e.qZA()(),e.TgZ(35,"span",39),e._uU(36," Ve\xedculo sinistrado "),e.TgZ(37,"strong",38),e._uU(38),e.qZA()(),e.TgZ(39,"span",39),e._uU(40," C\xf3digo FIPE "),e.TgZ(41,"strong",38),e._uU(42),e.qZA()(),e.TgZ(43,"span",39),e._uU(44," Valor FIPE "),e.TgZ(45,"strong",38),e._uU(46),e.ALo(47,"currency"),e.qZA()(),e.YNc(48,$,4,1,"span",54),e.YNc(49,fe,4,1,"span",54),e.YNc(50,ue,4,1,"span",54),e.YNc(51,pe,5,4,"span",54),e.YNc(52,de,4,1,"span",54),e.YNc(53,ge,5,4,"span",54),e.TgZ(54,"span",39),e._uU(55," Tipo de equipamento "),e.TgZ(56,"strong",38),e._uU(57),e.qZA()(),e.YNc(58,E,4,1,"span",54),e.YNc(59,G,4,1,"span",54),e.qZA()(),e.BQk()),2&s){const i=e.oxw(4);e.xp6(9),e.Oqu(i.viewData.ownerName),e.xp6(4),e.hij(" ",e.xi3(14,19,i.viewData.ownerDocument,(null==i.viewData.document?null:i.viewData.document.length)>11?"00.000.000/0000-00":"000.000.000-00")," "),e.xp6(5),e.Oqu(i.viewData.licensePlate),e.xp6(4),e.hij(" ",i.AutoTypesTranslated[i.viewData.autoType]," "),e.xp6(4),e.hij(" ",i.viewData.manufacturer||"---"," "),e.xp6(4),e.Oqu(i.viewData.model),e.xp6(4),e.Oqu(i.viewData.yearModel),e.xp6(4),e.hij(" ",i.viewData.isDamage?"Sim":"N\xe3o"," "),e.xp6(4),e.Oqu(i.viewData.fipe),e.xp6(4),e.hij(" ",e.xi3(47,22,i.viewData.vehicleValue,"BRL")," "),e.xp6(2),e.Q6J("ngIf",i.viewData.cargoType),e.xp6(1),e.Q6J("ngIf",i.viewData.protectBody),e.xp6(1),e.Q6J("ngIf",i.viewData.bodyType),e.xp6(1),e.Q6J("ngIf",i.viewData.bodyValue),e.xp6(1),e.Q6J("ngIf",i.viewData.protectAdditionalAxle),e.xp6(1),e.Q6J("ngIf",i.viewData.additionalAxleValue),e.xp6(4),e.hij(" ",i.viewData.securityDevice," "),e.xp6(1),e.Q6J("ngIf",i.viewData.securityDeviceCompanyName),e.xp6(1),e.Q6J("ngIf",i.viewData.securityDeviceCompanyContact)}}function Se(s,v){if(1&s&&(e.ynx(0),e.TgZ(1,"h3",49),e._uU(2,"Dados do Implemento"),e.qZA(),e.TgZ(3,"div",55)(4,"div",52)(5,"span",39),e._uU(6," Nome do propriet\xe1rio "),e.TgZ(7,"strong",38),e._uU(8),e.qZA()(),e.TgZ(9,"span",53),e._uU(10," CPF/CNPJ "),e.TgZ(11,"strong",38),e._uU(12),e.ALo(13,"mask"),e.qZA()()(),e.TgZ(14,"span",39),e._uU(15," Placa "),e.TgZ(16,"strong",38),e._uU(17),e.qZA()(),e.TgZ(18,"span",39),e._uU(19," Tipo de Implemento "),e.TgZ(20,"strong",38),e._uU(21),e.qZA()(),e.TgZ(22,"span",39),e._uU(23," Modelo "),e.TgZ(24,"strong",38),e._uU(25),e.qZA()(),e.TgZ(26,"span",39),e._uU(27," Ano "),e.TgZ(28,"strong",38),e._uU(29),e.qZA()(),e.TgZ(30,"span",39),e._uU(31," Tipo de carroceria "),e.TgZ(32,"strong",38),e._uU(33),e.qZA()(),e.TgZ(34,"span",39),e._uU(35," Tipo de carga "),e.TgZ(36,"strong",38),e._uU(37),e.qZA()(),e.TgZ(38,"span",53),e._uU(39," Valor declarado "),e.TgZ(40,"strong",38),e._uU(41),e.ALo(42,"currency"),e.qZA()()(),e.BQk()),2&s){const i=e.oxw(4);e.xp6(8),e.Oqu(i.viewData.ownerName),e.xp6(4),e.hij(" ",e.xi3(13,9,i.viewData.ownerDocument,(null==i.viewData.ownerDocument?null:i.viewData.ownerDocument.length)>11?"00.000.000/0000-00":"000.000.000-00")," "),e.xp6(5),e.Oqu(i.viewData.licensePlate),e.xp6(4),e.Oqu(i.viewData.aggregateType),e.xp6(4),e.Oqu(i.viewData.model),e.xp6(4),e.Oqu(i.viewData.yearModel),e.xp6(4),e.Oqu(i.viewData.bodyType),e.xp6(4),e.Oqu(i.viewData.cargoType),e.xp6(4),e.hij(" ",e.xi3(42,12,i.viewData.aggregateValue,"BRL")," ")}}function ze(s,v){if(1&s&&(e.ynx(0),e.TgZ(1,"h3",49),e._uU(2,"Dados do Equipamento"),e.qZA(),e.TgZ(3,"div",50)(4,"div",51)(5,"span",39),e._uU(6," N\xfamero de s\xe9rie "),e.TgZ(7,"strong",38),e._uU(8),e.qZA()(),e.TgZ(9,"span",39),e._uU(10," Tipo de equipamento "),e.TgZ(11,"strong",38),e._uU(12),e.qZA()(),e.TgZ(13,"span",39),e._uU(14," Descri\xe7\xe3o "),e.TgZ(15,"strong",38),e._uU(16),e.qZA()(),e.TgZ(17,"span",39),e._uU(18," Valor "),e.TgZ(19,"strong",38),e._uU(20),e.ALo(21,"currency"),e.qZA()()()(),e.BQk()),2&s){const i=e.oxw(4);e.xp6(8),e.Oqu(i.viewData.serialNumber),e.xp6(4),e.hij(" ",i.viewData.equipmentType," "),e.xp6(4),e.hij(" ",i.viewData.description||"---"," "),e.xp6(4),e.hij(" ",e.xi3(21,4,i.viewData.declaredValue,"BRL")," ")}}function Fe(s,v){if(1&s&&(e.ynx(0),e.YNc(1,Ne,60,25,"ng-container",9),e.YNc(2,Se,43,15,"ng-container",9),e.YNc(3,ze,22,7,"ng-container",9),e.BQk()),2&s){const i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",i.viewData.autoType==i.AutoTypes.Light||i.viewData.autoType==i.AutoTypes.Heavy||i.viewData.autoType==i.AutoTypes.Motorcycle),e.xp6(1),e.Q6J("ngIf",i.viewData.autoType==i.AutoTypes.Aggregate),e.xp6(1),e.Q6J("ngIf",i.viewData.autoType==i.AutoTypes.Equipment)}}function ee(s,v){if(1&s&&(e.TgZ(0,"span",39),e._uU(1," Telefone 2 "),e.TgZ(2,"strong",38),e._uU(3),e.ALo(4,"mask"),e.qZA()()),2&s){const i=e.oxw(4);e.xp6(3),e.hij(" ",e.xi3(4,1,i.findContactType(null==i.viewData?null:i.viewData.contacts,"Phone").contact,"(00) 0 0000-0000")," ")}}function me(s,v){if(1&s&&(e.TgZ(0,"span",53),e._uU(1," Email "),e.TgZ(2,"strong",38),e._uU(3),e.qZA()()),2&s){const i=e.oxw(4);e.xp6(3),e.hij(" ",i.findContactType(null==i.viewData?null:i.viewData.contacts,"Email").contact," ")}}function ct(s,v){if(1&s&&(e.TgZ(0,"div",58)(1,"span",39),e._uU(2," Endere\xe7o "),e.TgZ(3,"strong",38),e._uU(4),e.qZA()(),e.TgZ(5,"span",39),e._uU(6," Bairro "),e.TgZ(7,"strong",38),e._uU(8),e.qZA()(),e.TgZ(9,"span",39),e._uU(10," N\xfamero "),e.TgZ(11,"strong",38),e._uU(12),e.qZA()(),e.TgZ(13,"span",39),e._uU(14," Complemento "),e.TgZ(15,"strong",38),e._uU(16),e.qZA()(),e.TgZ(17,"span",53),e._uU(18," Cidade/UF "),e.TgZ(19,"strong",38),e._uU(20),e.qZA()()()),2&s){const i=v.ngIf;e.xp6(4),e.hij(" ",i.streetName," "),e.xp6(4),e.hij(" ",i.neighborhood," "),e.xp6(4),e.hij(" ",i.number||"---"," "),e.xp6(4),e.hij(" ",i.complement||"---"," "),e.xp6(4),e.hij(" ",i.city+"/"+i.federationUnit," ")}}function ut(s,v){if(1&s&&(e.ynx(0),e.TgZ(1,"h3",49),e._uU(2,"Dados do Cooperado"),e.qZA(),e.TgZ(3,"div",55)(4,"span",39),e._uU(5," Nome "),e.TgZ(6,"strong",38),e._uU(7),e.qZA()(),e.TgZ(8,"span",39),e._uU(9," Tipo de pessoa "),e.TgZ(10,"strong",38),e._uU(11),e.qZA()(),e.TgZ(12,"span",39),e._uU(13," CPF/CNPJ "),e.TgZ(14,"strong",38),e._uU(15),e.ALo(16,"mask"),e.qZA()(),e.TgZ(17,"span",39),e._uU(18," Telefone "),e.TgZ(19,"strong",38),e._uU(20),e.ALo(21,"mask"),e.qZA()(),e.YNc(22,ee,5,4,"span",54),e.YNc(23,me,4,1,"span",56),e.qZA(),e.YNc(24,ct,21,5,"div",57),e.BQk()),2&s){const i=e.oxw(3);e.xp6(7),e.Oqu(null==i.viewData?null:i.viewData.displayName),e.xp6(4),e.hij(" ",i.PersonTypeTranslated[null==i.viewData?null:i.viewData.personType]," "),e.xp6(4),e.hij(" ",e.xi3(16,7,null==i.viewData?null:i.viewData.document,"Legal"==(null==i.viewData?null:i.viewData.personType)?"00.000.000/0000-00":"000.000.000-00")," "),e.xp6(5),e.hij(" ",e.xi3(21,10,null==i.viewData||null==i.viewData.contacts[0]?null:i.viewData.contacts[0].contact,"(00) 0 0000-0000")," "),e.xp6(2),e.Q6J("ngIf",(null==i.viewData?null:i.viewData.contacts)&&i.findContactType(null==i.viewData?null:i.viewData.contacts,"Phone")),e.xp6(1),e.Q6J("ngIf",(null==i.viewData?null:i.viewData.contacts)&&i.findContactType(null==i.viewData?null:i.viewData.contacts,"Email")),e.xp6(1),e.Q6J("ngIf",null==i.viewData?null:i.viewData.addresses[0])}}function pt(s,v){1&s&&(e.TgZ(0,"span"),e._uU(1,"Reprovar"),e.qZA())}function qe(s,v){1&s&&e._UZ(0,"div",59)}function Ve(s,v){1&s&&(e.TgZ(0,"span"),e._uU(1,"Aprovar"),e.qZA())}function Be(s,v){1&s&&e._UZ(0,"div",60)}function Ye(s,v){if(1&s){const i=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"div"),e.YNc(3,Fe,4,3,"ng-container",9),e.YNc(4,ut,25,13,"ng-container",9),e.TgZ(5,"div",34)(6,"h3",35),e._uU(7,"Coment\xe1rios"),e.qZA()(),e.TgZ(8,"div",36)(9,"span",37),e._uU(10," Atendente "),e.TgZ(11,"strong",38),e._uU(12),e.qZA()(),e.TgZ(13,"span",39),e._uU(14," Coment\xe1rios "),e.qZA(),e.TgZ(15,"form",40)(16,"div",41)(17,"span",42),e._uU(18,"Coment\xe1rios"),e.qZA(),e._UZ(19,"textarea",43),e.qZA()()()(),e.TgZ(20,"div",44)(21,"button",45),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).submit("Reprove")}),e.ALo(22,"async"),e.YNc(23,pt,2,0,"span",9),e.ALo(24,"async"),e.YNc(25,qe,1,0,"div",46),e.ALo(26,"async"),e.qZA(),e.TgZ(27,"button",47),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).submit("Approve")}),e.ALo(28,"async"),e.YNc(29,Ve,2,0,"span",9),e.ALo(30,"async"),e.YNc(31,Be,1,0,"div",48),e.ALo(32,"async"),e.qZA()()()()}if(2&s){const i=e.oxw(2);e.xp6(3),e.Q6J("ngIf",null==i.viewData?null:i.viewData.autoType),e.xp6(1),e.Q6J("ngIf",i.viewData&&!(null!=i.viewData&&i.viewData.autoType)),e.xp6(8),e.hij(" ",null==i.profile?null:i.profile.displayName," "),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(6),e.Q6J("disabled",e.lcZ(22,10,i.submitLoading.Reprove)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(24,12,i.submitLoading.Reprove)),e.xp6(2),e.Q6J("ngIf",e.lcZ(26,14,i.submitLoading.Reprove)),e.xp6(2),e.Q6J("disabled",e.lcZ(28,16,i.submitLoading.Approve)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(30,18,i.submitLoading.Approve)),e.xp6(2),e.Q6J("ngIf",e.lcZ(32,20,i.submitLoading.Approve))}}function oe(s,v){if(1&s&&(e.TgZ(0,"div",26),e.YNc(1,_e,4,0,"div",27),e.ALo(2,"async"),e.YNc(3,Ye,33,22,"div",28),e.ALo(4,"async"),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,i.loading$)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(4,4,i.loading$))}}let je=(()=>{class s{constructor(i,f,p,h,W,be){this.data=i,this.inspectionAnalysis=f,this.userProfile=p,this.dialogRef=h,this.elRef=W,this.renderer=be,this.pdfPage=1,this.pdfRotation=0,this.pdfNumPages=1,this.isAnalisys=!1,this.form=new L.cw({comments:new L.NI("",[L.kI.max(300)])}),this.pdfViewerVisible=new V.X(!0),this.pdfZoom=new V.X(.9),this.loading$=new V.X(!1),this.submitLoading={Approve:new V.X(!1),Reprove:new V.X(!1)},this.subscription=new Q.w0}onResize(i){this.viewer.destroy(),this.initViewer(),this.pdfViewerVisible.next(!1),setTimeout(()=>this.pdfViewerVisible.next(!0),100)}get PersonTypeTranslated(){return Y.D}get AutoTypes(){return u.rQ}get comments(){return this.form.controls.comments}ngOnInit(){var i,f;if(this.data.proponent||this.data.equipment||this.data.asset){this.comments.setValue(this.data.item.justification),this.commitsControl(),this.isAnalisys=!0,this.userProfile.getProfile().pipe((0,m.q)(1)).subscribe(be=>this.profile=be),this.loading$.next(!0);const h=this.data.proponent||this.data.equipment||this.data.asset;console.log(this.data);const W={type:h.assetType?"Asset":"Proponent",assetType:h.assetType,autoType:h.autoType,assetId:this.data.equipment?null===(i=this.data.asset)||void 0===i?void 0:i.id:null===(f=this.data.asset)||void 0===f?void 0:f.assetId,assetAccessoryId:this.data.equipment?h.id:void 0};this.inspectionAnalysis.getAnalisisDetails(this.data.inspection.id,W).pipe((0,m.q)(1),(0,j.x)(()=>this.loading$.next(!1))).subscribe(be=>{console.log(be),this.viewData=be})}this.subscription=(0,z.R)(this.elRef.nativeElement.parentNode,"click",{capture:!0}).subscribe(h=>this.handleClick(h))}afterLoadComplete({_pdfInfo:i}){this.pdfNumPages=i.numPages}pagesInitialized(i){this.handleWheel(i)}handleWheel(i){const f=this.elRef.nativeElement.querySelector(".pdfViewer");f&&this.renderer.listen(f,"mousewheel",({deltaY:p})=>{const h=this.pdfZoom.getValue();100==p&&h>.2&&this.pdfZoom.next(h-.1),-100==p&&this.pdfZoom.next(h+.1)})}reset(){this.pdfZoom.next(.9),this.pdfRotation=0}pdfActions(i){switch(i){case"zoomIn":this.pdfZoom.next(this.pdfZoom.getValue()+.1);break;case"zoomOut":const f=this.pdfZoom.getValue();f>.2&&this.pdfZoom.next(f-.1);break;case"rotateIn":this.pdfRotation=270==this.pdfRotation?0:this.pdfRotation+90;break;case"rotateOut":this.pdfRotation=-270==this.pdfRotation?0:this.pdfRotation-90;break;case"nextPage":this.pdfPage+=1;break;case"previousPage":this.pdfPage-=1;break;default:this.reset()}}findContactType(i,f){return null==i?void 0:i.find(p=>{var h;return null===(h=p.types)||void 0===h?void 0:h.includes(f)})}commitsControl(){this.comments.valueChanges.subscribe(i=>{this.data.item.justification=i})}submit(i){var f;if(this.comments.markAsTouched(),this.comments.markAsDirty(),this.comments.setValidators("Reprove"==i?[L.kI.max(300),L.kI.required]:[L.kI.max(300)]),this.comments.updateValueAndValidity(),this.form.valid){const p={type:this.data.item.document&&!this.data.asset?S._P.Document:S._P.Picture,assetType:this.viewData.assetType,autoType:this.viewData.autoType,accessoryAutoType:this.viewData.autoType,assetId:null===(f=this.data.asset)||void 0===f?void 0:f.id,assetAccessoryId:this.viewData.id,fileId:this.data.item.id,action:i,justification:this.comments.value};this.submitLoading[i].next(!0),this.inspectionAnalysis.submitInspect(this.data.inspection.id,p).pipe((0,m.q)(1),(0,j.x)(()=>this.submitLoading[i].next(!1))).subscribe(h=>{console.log(h),h&&(this.data.item.status="Approve"==i?"Approved":"Reproved",this.dialogRef.close({result:h,item:this.data.item}))})}}ngOnDestroy(){this.subscription.unsubscribe()}ngAfterViewInit(){this.initViewer()}get ArchiveTypeTranslated(){return S.M9}get AutoTypesTranslated(){return u.fs}initViewer(){const i=document.getElementById("image")||document.querySelector(".pdfViewer");this.viewer=new(q())(i,{inline:!0,backdrop:!1,movable:!0,fullscreen:!1,minHeight:.85*window.innerHeight,button:!1,title:0,navbar:0,toolbar:{zoomIn:4,zoomOut:4,reset:4,rotateLeft:4,rotateRight:4,flipHorizontal:4,flipVertical:4,play:0,next:0,prev:0},viewed(){}}),this.viewer.show()}close(){this.dialogRef.close()}download(){var i,f;if(null===(i=this.data)||void 0===i?void 0:i.item){const p=null===(f=this.data)||void 0===f?void 0:f.item,h=p.src,W=document.createElement("a");W.href=h,W.download=p.document||p.picture||p.fileName,W.click()}}handleClick({target:i}){["header","file-preview","viewer-container","viewer-canvas","row wrapper","page","pdfViewer removePageBorders","ng2-pdf-viewer-container"].includes(i.className)&&this.close()}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(K.WI),e.Y36(le.z),e.Y36(ne.i),e.Y36(K.so),e.Y36(e.SBq),e.Y36(e.Qsj))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-file-preview"]],hostBindings:function(i,f){1&i&&e.NdJ("resize",function(h){return f.onResize(h)},!1,e.Jf7)},decls:18,vars:9,consts:[[1,"row","wrapper"],[1,"file-preview",3,"ngClass"],[1,"header"],[1,"btn","btn-transparent",3,"click"],[1,"text-white"],[1,"fas","fa-arrow-left","mr-2"],[1,"description"],[1,"fas","fa-download"],[1,"image-container"],[4,"ngIf"],["id","image",3,"hidden","src",4,"ngIf"],["class","document-preview col-md-4",4,"ngIf"],["zoom-scale","page-height","class","pdf-preview",3,"src","rotation","autoresize","page","render-text","show-all","zoom","zoom-scale","external-link-target","original-size","--pdf-zoom","ngStyle","pageChange","after-load-complete","pages-initialized",4,"ngIf"],[1,"d-flex","justify-content-center","buttons-pdf"],[1,"mr-1","control-icons",3,"click"],[1,"fas","fa-plus"],[1,"mr-1","control-icons",3,"disabled","click"],[1,"fas","fa-minus"],[1,"fas","fa-redo-alt"],[1,"fas","fa-arrow-left"],[1,"text-white","mx-1"],[1,"fas","fa-arrow-right"],[1,"fas","fa-level-up-alt"],[1,"fas","fa-level-down-alt"],["zoom-scale","page-height",1,"pdf-preview",3,"src","rotation","autoresize","page","render-text","show-all","zoom","zoom-scale","external-link-target","original-size","ngStyle","pageChange","after-load-complete","pages-initialized"],["id","image",3,"hidden","src"],[1,"document-preview","col-md-4"],["class","card h-100 d-flex justify-content-center align-items-center",4,"ngIf"],["class","card view-data h-100",4,"ngIf"],[1,"card","h-100","d-flex","justify-content-center","align-items-center"],["role","status",1,"spinner","spinner-border","text-primary"],[1,"sr-only"],[1,"card","view-data","h-100"],[1,"details","d-flex","flex-column","justify-content-between","h-100"],[1,"d-flex","align-items-center","mb-3","mt-4"],[1,"text-blue-400","mb-0","mr-2"],[1,"card","comments","text","p-2"],[1,"text-gray-300","mb-2"],[1,"ml-1"],[1,"text-gray-300","mb-1"],[3,"formGroup"],[1,"form-group"],["hidden","","for","comments"],["id","comments","formControlName","comments","name","comments","rows","2","maxlength","300",1,"form-control","input-comments"],[1,"group-btn","d-lg-flex","justify-content-end","mt-4"],[1,"btn","btn-outline-light-atb","mr-2",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-2 text-primary","role","status",4,"ngIf"],[1,"btn","btn-primary-atb","mt-2","mt-lg-0",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-2 text-white","role","status",4,"ngIf"],[1,"text-blue-400","mb-3"],[1,"card","p-2"],[1,"d-flex","flex-column","mb-2","subtitle-sm","asset-data"],[1,"owner-asset","d-flex","flex-column"],[1,"text-gray-300"],["class","text-gray-300 mb-1",4,"ngIf"],[1,"card","mb-2","subtitle-sm","p-2"],["class","text-gray-300",4,"ngIf"],["class","card subtitle-sm p-2",4,"ngIf"],[1,"card","subtitle-sm","p-2"],["role","status",1,"spinner-border","spinner-border-sm","mr-2","text-primary"],["role","status",1,"spinner-border","spinner-border-sm","mr-2","text-white"]],template:function(i,f){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"button",3),e.NdJ("click",function(){return f.close()}),e.TgZ(5,"span",4),e._UZ(6,"i",5),e._uU(7," Voltar "),e.qZA()(),e.TgZ(8,"span",6),e._uU(9),e.qZA(),e.TgZ(10,"button",3),e.NdJ("click",function(){return f.download()}),e.TgZ(11,"span",4),e._UZ(12,"i",7),e.qZA()()(),e.TgZ(13,"div",8),e.YNc(14,ce,20,7,"ng-container",9),e.YNc(15,ye,1,2,"img",10),e.qZA()(),e.YNc(16,oe,5,6,"div",11),e.ALo(17,"async"),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngClass",f.isAnalisys||e.lcZ(2,5,f.loading$)?"col-md-8":"col-md-12"),e.xp6(8),e.hij(" ",f.ArchiveTypeTranslated[(null==f.data.item?null:f.data.item.document)||(null==f.data.item?null:f.data.item.picture)]," "),e.xp6(5),e.Q6J("ngIf",null==f.data.item?null:f.data.item.isPdf),e.xp6(1),e.Q6J("ngIf",!(null!=f.data.item&&f.data.item.isPdf)),e.xp6(1),e.Q6J("ngIf",f.isAnalisys||e.lcZ(17,7,f.loading$)))},directives:[H.mk,H.O5,C.rQ,H.PC,L._Y,L.JL,L.sg,T.MU,T.HK,L.Fj,T.oH,L.JJ,L.u,L.nD],pipes:[H.Ov,Z.Iq,H.H9],styles:[".view-container{min-height:91vh!important}.row.wrapper[_ngcontent-%COMP%]{margin:0!important}.row.wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]{background:transparent;color:#fff;padding:2rem;display:flex;flex-direction:column}.row.wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{display:flex;align-self:center;align-items:center;max-width:800px}.row.wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;max-width:100%}.row.wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px;margin-bottom:1rem}.row.wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{z-index:2015;position:absolute;bottom:1rem;display:flex;align-items:center;justify-content:center;margin-left:50%;transform:translate(-50%)}.row.wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .zoom[_ngcontent-%COMP%]{background:#181818;border-radius:6px}.row.wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#181818;color:#fff}.row.wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-transparent[_ngcontent-%COMP%]{color:#fff}.row.wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#282828}.row.wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   #sync-reverse[_ngcontent-%COMP%]{transform:rotateX(180deg)}.row.wrapper[_ngcontent-%COMP%]   .document-preview[_ngcontent-%COMP%]{height:100vh;min-height:-webkit-max-content;min-height:-moz-max-content;min-height:max-content;padding:2rem}.row.wrapper[_ngcontent-%COMP%]   .document-preview[_ngcontent-%COMP%]   .view-data[_ngcontent-%COMP%]{min-height:100%;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;width:100%;border-radius:0;padding:1.5rem 1.5rem 1rem}.row.wrapper[_ngcontent-%COMP%]   .document-preview[_ngcontent-%COMP%]   .view-data[_ngcontent-%COMP%]   .asset-data[_ngcontent-%COMP%]{max-height:24rem;overflow-y:auto}.row.wrapper[_ngcontent-%COMP%]   .document-preview[_ngcontent-%COMP%]   .view-data[_ngcontent-%COMP%]   .asset-data[_ngcontent-%COMP%]::-webkit-scrollbar{width:3px}.row.wrapper[_ngcontent-%COMP%]   .document-preview[_ngcontent-%COMP%]   .view-data[_ngcontent-%COMP%]   .owner-asset[_ngcontent-%COMP%]{padding-bottom:1rem;margin-bottom:1rem;border-bottom:1px solid #D8DBDF}.row.wrapper[_ngcontent-%COMP%]   .document-preview[_ngcontent-%COMP%]   .view-data[_ngcontent-%COMP%]   .input-comments[_ngcontent-%COMP%]{border:1px solid #D8DBDF}.image-container[_ngcontent-%COMP%]{position:relative}.image-container[_ngcontent-%COMP%]   .buttons-pdf[_ngcontent-%COMP%]{position:absolute;left:calc(50% - 100px);bottom:-30px}.image-container[_ngcontent-%COMP%]   .buttons-pdf[_ngcontent-%COMP%]   .control-icons[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);padding:6px 7px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:none;outline:none}.image-container[_ngcontent-%COMP%]   .buttons-pdf[_ngcontent-%COMP%]   .control-icons[_ngcontent-%COMP%]:focus{box-shadow:0 0 3px #ffffff9c}.image-container[_ngcontent-%COMP%]   .buttons-pdf[_ngcontent-%COMP%]   .control-icons[_ngcontent-%COMP%]:disabled{filter:brightness(.3)}.image-container[_ngcontent-%COMP%]   .buttons-pdf[_ngcontent-%COMP%]   .control-icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:11px;color:#fff}  .file-preview .cropper-bg{background-image:none!important}  .file-preview .mat-dialog-container{background:rgba(0,0,0,.85)}  .file-preview .cdk-overlay-pane{max-width:100vw!important}  .file-preview .cdk-overlay-dark-backdrop{background:rgba(0,0,0,.85)}  .file-preview pdf-viewer.pdf-preview .ng2-pdf-viewer-container{display:flex;align-items:center;justify-content:center}  .file-preview pdf-viewer.pdf-preview .ng2-pdf-viewer-container .page{transform:scale(var(--pdf-zoom));transition:transform .2s ease-in-out,zoom .5s ease-in-out;-webkit-animation:pop-in .2s;animation:pop-in .2s;margin-bottom:0!important}@-webkit-keyframes pop-in{0%{opacity:0;transform:scale(.1)}to{opacity:1;transform:scale(var(--pdf-zoom))}}@keyframes pop-in{0%{opacity:0;transform:scale(.1)}to{opacity:1;transform:scale(var(--pdf-zoom))}}@media (max-width: 991px){.btn[_ngcontent-%COMP%]{width:100%}}@media (max-width: 800px){.document-preview[_ngcontent-%COMP%]{height:-webkit-max-content!important;height:-moz-max-content!important;height:max-content!important}}@media (max-width: 799px){.document-preview[_ngcontent-%COMP%]{margin-top:70vh}}"],changeDetection:0}),s})();var Je=b(7751),Qe=b(3486);function We(s,v){if(1&s&&(e.TgZ(0,"ngb-progressbar",16)(1,"p"),e._uU(2,"Carregando arquivo..."),e.qZA()()),2&s){const i=e.oxw(2);e.Q6J("@popupAnim",void 0)("animated",!0)("value",i.item.progress)}}function Te(s,v){if(1&s&&(e.TgZ(0,"p",17),e._uU(1),e.qZA()),2&s){const i=e.oxw(2);e.Q6J("@popupAnim",void 0),e.xp6(1),e.hij(" O tipo de arquivo (",i.item.extensionError,") n\xe3o \xe9 permitido. ")}}function He(s,v){if(1&s){const i=e.EpF();e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,We,3,3,"ngb-progressbar",4),e.YNc(3,Te,2,2,"p",5),e.qZA(),e.TgZ(4,"div",6),e.NdJ("onFileDropped",function(p){e.CHM(i);const h=e.oxw();return h.submitUpload.next({file:p.target,type:h.photoType,subType:h.item.document||h.item.picture,item:h.item})}),e.TgZ(5,"input",7,8),e.NdJ("change",function(p){e.CHM(i);const h=e.oxw();return h.submitUpload.next({file:p.target,type:h.photoType,subType:h.item.document||h.item.picture,item:h.item})}),e.qZA(),e.TgZ(7,"div",9),e._UZ(8,"i",10),e.TgZ(9,"p",11),e._uU(10,"Arraste e solte"),e.qZA(),e.TgZ(11,"div",12)(12,"p",13),e._uU(13," ou "),e.qZA(),e.TgZ(14,"label",14),e._uU(15," clique aqui "),e.qZA()()()(),e._UZ(16,"div",15),e.qZA()}if(2&s){const i=e.oxw();e.xp6(2),e.Q6J("ngIf",i.item.progress>0&&i.item.progress<101),e.xp6(1),e.Q6J("ngIf",i.item.extensionError),e.xp6(2),e.Q6J("disabled",i.item.loading)}}function $e(s,v){1&s&&(e.TgZ(0,"p",28),e._uU(1," * Obrigat\xf3rio "),e.qZA())}function Xe(s,v){if(1&s&&(e.TgZ(0,"ngb-progressbar",29)(1,"p"),e._uU(2,"Carregando arquivo..."),e.qZA()()),2&s){const i=e.oxw(2);e.Q6J("id","progress"+i.index)("@popupAnim",void 0)("animated",!0)("value",i.item.progress)}}function Ke(s,v){if(1&s&&(e.TgZ(0,"p",17),e._uU(1),e.qZA()),2&s){const i=e.oxw(2);e.Q6J("@popupAnim",void 0),e.xp6(1),e.hij(" O tipo de arquivo (",i.item.extensionError,") n\xe3o \xe9 permitido. ")}}function Ge(s,v){1&s&&e._UZ(0,"img",33),2&s&&e.Q6J("@popupAnim",void 0)}function et(s,v){if(1&s&&(e.ynx(0,30),e._UZ(1,"pdf-viewer",31),e.YNc(2,Ge,1,1,"img",32),e.BQk()),2&s){const i=e.oxw(2);e.xp6(1),e.Q6J("@popupAnim",void 0)("src",i.item.src)("page",1)("zoom",1)("show-all",!1)("render-text",!1)("original-size",!1),e.xp6(1),e.Q6J("ngIf",!i.item.loading)}}function tt(s,v){1&s&&e._UZ(0,"img",33),2&s&&e.Q6J("@popupAnim",void 0)}function it(s,v){if(1&s&&(e.ynx(0,30),e._UZ(1,"img",34),e.YNc(2,tt,1,1,"img",32),e.BQk()),2&s){const i=e.oxw(2);e.xp6(1),e.Q6J("@popupAnim",void 0)("src",i.item.src,e.LSH),e.xp6(1),e.Q6J("ngIf",!i.item.loading)}}function nt(s,v){1&s&&e._UZ(0,"img",36)}function ot(s,v){if(1&s&&(e.ynx(0),e.YNc(1,nt,1,0,"img",35),e.BQk()),2&s){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!i.item.loading)}}function Oe(s,v){1&s&&e._UZ(0,"div",40)}function Re(s,v){if(1&s&&(e.TgZ(0,"div",15)(1,"div",37),e.YNc(2,Oe,1,0,"div",38),e.TgZ(3,"p",39),e._uU(4),e.qZA()()()),2&s){const i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",null==i.item?null:i.item.loading),e.xp6(2),e.hij(" ","Anexo-"+(i.index+1)," ")}}function Ae(s,v){1&s&&e._UZ(0,"div",40)}const Pe=function(s){return{color:s}};function dt(s,v){if(1&s&&(e.TgZ(0,"div",41)(1,"div",42),e.YNc(2,Ae,1,0,"div",38),e.TgZ(3,"p",39),e._uU(4),e.qZA()(),e.TgZ(5,"label",43),e._UZ(6,"i",44),e._uU(7),e.qZA()()),2&s){const i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",null==i.item?null:i.item.loading),e.xp6(2),e.hij(" ",i.ArchiveTypeTranslated[i.item.document||i.item.picture]," "),e.xp6(1),e.Q6J("for","panel"+i.index),e.xp6(1),e.Q6J("ngStyle",e.VKq(5,Pe,i.analysisStatus(i.item.status))),e.xp6(1),e.hij(" ",i.InspectionAnalysisStatusTranslator[i.item.status]," ")}}function R(s,v){1&s&&e._UZ(0,"div",40)}function we(s,v){1&s&&e._UZ(0,"i",49)}const xe=function(s){return{"not-allowed":s}};function gt(s,v){if(1&s){const i=e.EpF();e.TgZ(0,"div",45)(1,"div",42),e.YNc(2,R,1,0,"div",38),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.YNc(5,we,1,0,"i",46),e.qZA(),e.TgZ(6,"label",47),e._uU(7),e.qZA(),e.TgZ(8,"input",48),e.NdJ("change",function(p){e.CHM(i);const h=e.oxw(2);return h.submitUpload.next({file:p.target,type:h.photoType,subType:h.item.document||h.item.picture,item:h.item})}),e.qZA()()}if(2&s){const i=e.oxw(2);e.Q6J("ngClass",i.item.src?"state-ok":"state-waiting"),e.xp6(2),e.Q6J("ngIf",i.item.loading),e.xp6(2),e.hij(" ",i.ArchiveTypeTranslated[i.item.document||i.item.picture]," "),e.xp6(1),e.Q6J("ngIf",i.item.src),e.xp6(1),e.Q6J("for","panel"+i.index)("ngClass",e.VKq(9,xe,i.item.loading)),e.xp6(1),e.hij(" ",i.item.src?"Alterar":"Adicionar"," "),e.xp6(1),e.Q6J("id","panel"+i.index)("disabled",i.item.loading)}}function Ee(s,v){1&s&&e._UZ(0,"div",40)}function O(s,v){if(1&s&&(e.TgZ(0,"div",15)(1,"div",42),e.YNc(2,Ee,1,0,"div",38),e.TgZ(3,"p",39),e._uU(4),e.qZA()(),e._UZ(5,"label",50),e.qZA()),2&s){const i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",i.item.loading),e.xp6(2),e.hij(" ",i.ArchiveTypeTranslated[i.item.document||i.item.picture]||i.item.fileName," "),e.xp6(1),e.Q6J("for","panel"+i.index)}}function D(s,v){if(1&s){const i=e.EpF();e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,$e,2,0,"p",18),e.YNc(3,Xe,3,4,"ngb-progressbar",19),e.YNc(4,Ke,2,2,"p",5),e.qZA(),e.TgZ(5,"div",20),e.NdJ("click",function(){e.CHM(i);const p=e.oxw();return p.viewImage(p.item,p.index)}),e.YNc(6,et,3,8,"ng-container",21),e.YNc(7,it,3,3,"ng-container",21),e.YNc(8,ot,2,1,"ng-container",22),e.qZA(),e.ynx(9,23),e.YNc(10,Re,5,2,"div",24),e.YNc(11,dt,8,7,"div",25),e.YNc(12,gt,9,11,"div",26),e.YNc(13,O,6,3,"div",27),e.BQk(),e.qZA()}if(2&s){const i=e.oxw();e.xp6(2),e.Q6J("ngIf",i.item.isRequired&&!i.item.src),e.xp6(1),e.Q6J("ngIf",i.item.progress>0&&i.item.progress<101),e.xp6(1),e.Q6J("ngIf",i.item.extensionError),e.xp6(2),e.Q6J("ngIf",(null==i.item?null:i.item.src)&&(null==i.item?null:i.item.isPdf)),e.xp6(1),e.Q6J("ngIf",(null==i.item?null:i.item.src)&&!(null!=i.item&&i.item.isPdf)),e.xp6(1),e.Q6J("ngIf",!(null!=i.item&&i.item.src)),e.xp6(1),e.Q6J("ngSwitch",i.type),e.xp6(1),e.Q6J("ngSwitchCase","attachment"),e.xp6(1),e.Q6J("ngSwitchCase","analysis"),e.xp6(1),e.Q6J("ngSwitchCase","upload")}}let X=(()=>{class s{constructor(i){this.dialog=i,this.verifiedItems=!1,this.isDragDrop=!1,this.index=0,this.submitUpload=new e.vpe,this.submitInspect=new e.vpe}set _item(i){this.item=i}ngOnInit(){}viewImage(i,f){var p;i.src?this.dialog.open(je,{height:"100vh",width:"100vw",maxWidth:"100vw",panelClass:"file-preview",data:{item:i,proponent:this.proponent,asset:this.asset,equipment:this.equipment,inspection:this.inspection}}).afterClosed().subscribe(W=>{W&&this.submitInspect.emit(W)}):null===(p=window.document.getElementById(`panel${f}`))||void 0===p||p.click()}get ArchiveTypeTranslated(){return S.M9}get InspectionAnalysisStatusTranslator(){return S.E3}analysisStatus(i){switch(i){case S.$N.Approved:return"#5CB85C";case S.$N.AwaitingAnalysis:case S.$N.Pending:case S.$N.UnderReview:return"#FFCD4E";default:return"#EF5858"}}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(K.uw))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-image-box"]],inputs:{_item:["item","_item"],verifiedItems:"verifiedItems",type:"type",isDragDrop:"isDragDrop",index:"index",asset:"asset",inspection:"inspection",equipment:"equipment",proponent:"proponent",photoType:"photoType"},outputs:{submitUpload:"submitUpload",submitInspect:"submitInspect"},decls:3,vars:4,consts:[[1,"box-wrapper"],["class","box-img",4,"ngIf"],[1,"box-img"],[1,"header-img"],["class","loading-photo",3,"animated","value",4,"ngIf"],["class","has-error",4,"ngIf"],["appDragDrop","",1,"drop-image",3,"onFileDropped"],["hidden","","type","file","id","dragdrop",3,"disabled","change"],["fileInput",""],[1,"drop-content"],[1,"fas","fa-plus","text-gray-200"],[1,"subtitle-sm","mb-0"],[1,"d-flex"],[1,"label-click","mr-1"],["for","dragdrop",1,"text-blue-300","cursor-pointer"],[1,"footer-img","d-flex","justify-content-between","state-waiting"],[1,"loading-photo",3,"animated","value"],[1,"has-error"],["class","required",4,"ngIf"],["class","loading-photo",3,"id","animated","value",4,"ngIf"],[1,"img-wrapper",3,"click"],["class","img-container",4,"ngIf"],[4,"ngIf"],[3,"ngSwitch"],["class","footer-img d-flex justify-content-between state-waiting",4,"ngSwitchCase"],["class","footer-img d-flex justify-content-between state-analysis",4,"ngSwitchCase"],["class","footer-img d-flex justify-content-between",3,"ngClass",4,"ngSwitchCase"],["class","footer-img d-flex justify-content-between state-waiting",4,"ngSwitchDefault"],[1,"required"],[1,"loading-photo",3,"id","animated","value"],[1,"img-container"],[2,"width","400px","height","14rem",3,"src","page","zoom","show-all","render-text","original-size"],["class","icon-search-zoom","src","assets/icons/search-zoom.svg",4,"ngIf"],["src","assets/icons/search-zoom.svg",1,"icon-search-zoom"],[1,"img-filled",3,"src"],["class","empty-img","src","assets/icons/empty-image.svg",4,"ngIf"],["src","assets/icons/empty-image.svg",1,"empty-img"],[1,"label-box",2,"overflow","hidden","white-space","nowrap","text-overflow","ellipsis"],["class","spinner spinner-border text-primary","role","status",4,"ngIf"],[1,"no-wrap"],["role","status",1,"spinner","spinner-border","text-primary"],[1,"footer-img","d-flex","justify-content-between","state-analysis"],[1,"label-box"],[1,"label-status","text-gray-300","no-wrap","small-label",3,"for"],[1,"fas","fa-circle","mr-1",3,"ngStyle"],[1,"footer-img","d-flex","justify-content-between",3,"ngClass"],["class","fas fa-check",4,"ngIf"],[1,"label-status",3,"for","ngClass"],["type","file","hidden","",3,"id","disabled","change"],[1,"fas","fa-check"],[1,"label-status","text-white","no-wrap","small-label",3,"for"]],template:function(i,f){1&i&&(e.TgZ(0,"div",0),e.YNc(1,He,17,3,"div",1),e.YNc(2,D,14,10,"div",1),e.qZA()),2&i&&(e.ekj("required",!(null!=f.item&&f.item.token)&&(null==f.item?null:f.item.isRequired)&&f.verifiedItems),e.xp6(1),e.Q6J("ngIf",f.isDragDrop),e.xp6(1),e.Q6J("ngIf",!f.isDragDrop))},directives:[H.O5,Je.Ly,Qe.N,C.rQ,H.RF,H.n9,H.PC,H.mk,H.ED],styles:['.box-wrapper[_ngcontent-%COMP%]{min-width:200px}.box-wrapper.required[_ngcontent-%COMP%]:before{content:"";width:8px;border-radius:6px 0 0 6px;background:#ffcd4e;height:93%;position:absolute;left:7px}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border:2px solid #f7f7f7;position:relative;border-radius:6px;overflow:hidden;width:100%;height:14rem;margin-bottom:.9375rem}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]:hover   .img-wrapper[_ngcontent-%COMP%]{cursor:pointer;transition:.2s ease-in;filter:brightness(93%)}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]:hover   .img-wrapper[_ngcontent-%COMP%]   .icon-search-zoom[_ngcontent-%COMP%]{width:50px}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .drop-image[_ngcontent-%COMP%]   .drop-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:0 auto}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .drop-image[_ngcontent-%COMP%]   .drop-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.375rem}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .drop-image[_ngcontent-%COMP%]   .drop-content[_ngcontent-%COMP%]   .label-click[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#70b9d8!important}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .img-filled[_ngcontent-%COMP%]{min-height:14rem;min-width:100%}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .icon-search-zoom[_ngcontent-%COMP%]{height:-webkit-fill-available}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .empty-img[_ngcontent-%COMP%]{width:3.625rem;filter:brightness(.9)}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .header-img[_ngcontent-%COMP%]{align-items:center;color:#fff;position:absolute;top:0;width:100%;height:1.25rem;z-index:2}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .header-img[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{position:absolute;color:#f04848b3;top:.2rem;left:.3rem}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .header-img[_ngcontent-%COMP%]   .has-error[_ngcontent-%COMP%]{background:#f04848;color:#fff;padding-left:.5rem}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .header-img[_ngcontent-%COMP%]     ngb-progressbar.loading-photo{border-radius:0!important;height:100%}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .header-img[_ngcontent-%COMP%]     ngb-progressbar.loading-photo .progress-bar{padding-left:.625rem;display:block!important;background-color:#5cb85c!important}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .header-img[_ngcontent-%COMP%]     ngb-progressbar.loading-photo .progress-bar p{text-align:start;line-height:1.125rem;font-size:.75rem}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .footer-img[_ngcontent-%COMP%]{background-color:#70b9d8;align-items:center;color:#fff;position:absolute;bottom:0;width:100%;height:2rem;padding:0 .9375rem}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .footer-img[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .footer-img[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{position:absolute;left:calc(50% - 2rem);bottom:calc(50% + 60px);width:4rem!important;height:4rem!important;border-width:5px!important}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .footer-img[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;margin:0}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .footer-img[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.625rem;font-size:.875rem}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .footer-img[_ngcontent-%COMP%]   .label-status[_ngcontent-%COMP%]{cursor:pointer;font-size:.75rem;font-weight:400;margin:0}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .footer-img[_ngcontent-%COMP%]   .label-status[_ngcontent-%COMP%]:hover{cursor:pointer;transition:.2s ease-in;filter:brightness(93%)}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .footer-img.state-ok[_ngcontent-%COMP%]{background-color:#5cb85c}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .footer-img.state-waiting[_ngcontent-%COMP%]{background-color:#70b9d8}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .footer-img.state-analysis[_ngcontent-%COMP%]{background-color:#f7f7f7;color:#63696d;font-weight:500}.box-wrapper[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]   .footer-img.state-analysis[_ngcontent-%COMP%]   .label-status[_ngcontent-%COMP%]{cursor:default;font-weight:400}.not-allowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.icon-search-zoom[_ngcontent-%COMP%]{background-size:contain;width:42px;height:42px;display:block;position:absolute;margin:0 auto;top:0;left:0;right:0;transition:.2s ease-in-out}.no-wrap[_ngcontent-%COMP%]{white-space:nowrap!important}.small-label[_ngcontent-%COMP%]{font-size:.75rem!important}@media (max-width: 992px){.box-img[_ngcontent-%COMP%]{height:350px!important}  pdf-viewer{height:350px!important;width:90vw!important}}'],data:{animation:[J.Gs,J.xk,J.bA]}}),s})()},3760:function(Ze){Ze.exports=function(){"use strict";function se(r,t){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),o.push.apply(o,n)}return o}function b(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?se(Object(o),!0).forEach(function(n){ie(r,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):se(Object(o)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(o,n))})}return r}function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function J(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function S(r,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function ie(r,t,o){return t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o,r}var q={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},Q="undefined"!=typeof window&&void 0!==window.document,z=Q?window:{},Y=!(!Q||!z.document.documentElement)&&"ontouchstart"in z.document.documentElement,u=!!Q&&"PointerEvent"in z,m="viewer",j="move",L="switch",le="zoom",ne="".concat(m,"-active"),H="".concat(m,"-close"),C="".concat(m,"-fade"),T="".concat(m,"-fixed"),Z="".concat(m,"-fullscreen"),P="".concat(m,"-fullscreen-exit"),N="".concat(m,"-hide"),ce="".concat(m,"-hide-md-down"),ye="".concat(m,"-hide-sm-down"),_e="".concat(m,"-hide-xs-down"),$="".concat(m,"-in"),fe="".concat(m,"-invisible"),ue="".concat(m,"-loading"),pe="".concat(m,"-move"),de="".concat(m,"-open"),ge="".concat(m,"-show"),E="".concat(m,"-transition"),G="click",Ne="dblclick",Se="dragstart",ze="focusin",Fe="keydown",ee="load",me="error",qe=u?"pointerdown":Y?"touchstart":"mousedown",Ve=u?"pointermove":Y?"touchmove":"mousemove",Be=u?"pointerup pointercancel":Y?"touchend touchcancel":"mouseup",oe="transitionend",Le="show",Je="hide",We="view",Te="viewed",He="move",$e="moved",Ke="rotated",Ge="scale",et="scaled",tt="zoom",it="zoomed",nt="play",Oe="".concat(m,"Action"),Re=/\s\s*/,Ae=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function Pe(r){return"string"==typeof r}var dt=Number.isNaN||z.isNaN;function R(r){return"number"==typeof r&&!dt(r)}function we(r){return void 0===r}function xe(r){return"object"===e(r)&&null!==r}var gt=Object.prototype.hasOwnProperty;function Ee(r){if(!xe(r))return!1;try{var t=r.constructor,o=t.prototype;return t&&o&&gt.call(o,"isPrototypeOf")}catch(n){return!1}}function O(r){return"function"==typeof r}function D(r,t){if(r&&O(t))if(Array.isArray(r)||R(r.length)){var n,o=r.length;for(n=0;n<o&&!1!==t.call(r,r[n],n,r);n+=1);}else xe(r)&&Object.keys(r).forEach(function(a){t.call(r,r[a],a,r)});return r}var X=Object.assign||function(t){for(var o=arguments.length,n=new Array(o>1?o-1:0),a=1;a<o;a++)n[a-1]=arguments[a];return xe(t)&&n.length>0&&n.forEach(function(l){xe(l)&&Object.keys(l).forEach(function(c){t[c]=l[c]})}),t},s=/^(?:width|height|left|top|marginLeft|marginTop)$/;function v(r,t){var o=r.style;D(t,function(n,a){s.test(a)&&R(n)&&(n+="px"),o[a]=n})}function i(r){return Pe(r)?r.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):r}function f(r,t){return!(!r||!t)&&(r.classList?r.classList.contains(t):r.className.indexOf(t)>-1)}function p(r,t){if(r&&t){if(R(r.length))return void D(r,function(n){p(n,t)});if(r.classList)return void r.classList.add(t);var o=r.className.trim();o?o.indexOf(t)<0&&(r.className="".concat(o," ").concat(t)):r.className=t}}function h(r,t){if(r&&t){if(R(r.length))return void D(r,function(o){h(o,t)});if(r.classList)return void r.classList.remove(t);r.className.indexOf(t)>=0&&(r.className=r.className.replace(t,""))}}function W(r,t,o){if(t){if(R(r.length))return void D(r,function(n){W(n,t,o)});o?p(r,t):h(r,t)}}var be=/([a-z\d])([A-Z])/g;function ht(r){return r.replace(be,"$1-$2").toLowerCase()}function De(r,t){return xe(r[t])?r[t]:r.dataset?r.dataset[t]:r.getAttribute("data-".concat(ht(t)))}function ft(r,t,o){xe(o)?r[t]=o:r.dataset?r.dataset[t]=o:r.setAttribute("data-".concat(ht(t)),o)}var _t=function(){var r=!1;if(Q){var t=!1,o=function(){},n=Object.defineProperty({},"once",{get:function(){return r=!0,t},set:function(l){t=l}});z.addEventListener("test",o,n),z.removeEventListener("test",o,n)}return r}();function I(r,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=o;t.trim().split(Re).forEach(function(l){if(!_t){var c=r.listeners;c&&c[l]&&c[l][o]&&(a=c[l][o],delete c[l][o],0===Object.keys(c[l]).length&&delete c[l],0===Object.keys(c).length&&delete r.listeners)}r.removeEventListener(l,a,n)})}function y(r,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=o;t.trim().split(Re).forEach(function(l){if(n.once&&!_t){var c=r.listeners,g=void 0===c?{}:c;a=function(){delete g[l][o],r.removeEventListener(l,a,n);for(var d=arguments.length,x=new Array(d),_=0;_<d;_++)x[_]=arguments[_];o.apply(r,x)},g[l]||(g[l]={}),g[l][o]&&r.removeEventListener(l,g[l][o],n),g[l][o]=a,r.listeners=g}r.addEventListener(l,a,n)})}function F(r,t,o,n){var a;return O(Event)&&O(CustomEvent)?a=new CustomEvent(t,b({bubbles:!0,cancelable:!0,detail:o},n)):(a=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,o),r.dispatchEvent(a)}function bt(r){var t=r.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}function at(r){var t=r.rotate,o=r.scaleX,n=r.scaleY,a=r.translateX,l=r.translateY,c=[];R(a)&&0!==a&&c.push("translateX(".concat(a,"px)")),R(l)&&0!==l&&c.push("translateY(".concat(l,"px)")),R(t)&&0!==t&&c.push("rotate(".concat(t,"deg)")),R(o)&&1!==o&&c.push("scaleX(".concat(o,")")),R(n)&&1!==n&&c.push("scaleY(".concat(n,")"));var g=c.length?c.join(" "):"none";return{WebkitTransform:g,msTransform:g,transform:g}}var mt=z.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(z.navigator.userAgent);function wt(r,t,o){var n=document.createElement("img");if(r.naturalWidth&&!mt)return o(r.naturalWidth,r.naturalHeight),n;var a=document.body||document.documentElement;return n.onload=function(){o(n.width,n.height),mt||a.removeChild(n)},D(t.inheritedAttributes,function(l){var c=r.getAttribute(l);null!==c&&n.setAttribute(l,c)}),n.src=r.src,mt||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(n)),n}function rt(r){switch(r){case 2:return _e;case 3:return ye;case 4:return ce;default:return""}}function st(r,t){var o=r.pageX,n=r.pageY,a={endX:o,endY:n};return t?a:b({timeStamp:Date.now(),startX:o,startY:n},a)}function Tt(r){var t=0,o=0,n=0;return D(r,function(a){t+=a.startX,o+=a.startY,n+=1}),{pageX:t/=n,pageY:o/=n}}var r,Pt={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var t=this.element.ownerDocument,o=t.body||t.documentElement;this.body=o,this.scrollbarWidth=window.innerWidth-t.documentElement.clientWidth,this.initialBodyPaddingRight=o.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(o).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var n,t=this.options,o=this.parent;t.inline&&(n={width:Math.max(o.offsetWidth,t.minWidth),height:Math.max(o.offsetHeight,t.minHeight)},this.parentData=n),(this.fulled||!n)&&(n=this.containerData),this.viewerData=X({},n)},renderViewer:function(){this.options.inline&&!this.fulled&&v(this.viewer,this.viewerData)},initList:function(){var t=this,o=this.element,n=this.options,a=this.list,l=[];a.innerHTML="",D(this.images,function(c,g){var w=c.src,d=c.alt||function yt(r){return Pe(r)?decodeURIComponent(r.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}(w),x=t.getImageURL(c);if(w||x){var _=document.createElement("li"),A=document.createElement("img");D(n.inheritedAttributes,function(k){var M=c.getAttribute(k);null!==M&&A.setAttribute(k,M)}),A.src=w||x,A.alt=d,A.setAttribute("data-original-url",x||w),_.setAttribute("data-index",g),_.setAttribute("data-viewer-action","view"),_.setAttribute("role","button"),n.keyboard&&_.setAttribute("tabindex",0),_.appendChild(A),a.appendChild(_),l.push(_)}}),this.items=l,D(l,function(c){var w,d,g=c.firstElementChild;ft(g,"filled",!0),n.loading&&p(c,ue),y(g,ee,w=function(_){I(g,me,d),n.loading&&h(c,ue),t.loadImage(_)},{once:!0}),y(g,me,d=function(){I(g,ee,w),n.loading&&h(c,ue)},{once:!0})}),n.transition&&y(o,Te,function(){p(a,E)},{once:!0})},renderList:function(){var t=this.index,o=this.items[t];if(o){var a=parseInt(window.getComputedStyle(o.nextElementSibling||o).marginLeft,10),l=o.offsetWidth,c=l+a;v(this.list,X({width:c*this.length-a},at({translateX:(this.viewerData.width-l)/2-c*t})))}},resetList:function(){var t=this.list;t.innerHTML="",h(t,E),v(t,at({translateX:0}))},initImage:function(t){var x,o=this,n=this.options,a=this.image,l=this.viewerData,c=this.footer.offsetHeight,g=l.width,w=Math.max(l.height-c,c),d=this.imageData||{};this.imageInitializing={abort:function(){x.onload=null}},x=wt(a,n,function(_,A){var k=_/A,M=g,re=w;o.imageInitializing=!1,w*k>g?re=g/k:M=w*k,M=Math.min(.9*M,_),re=Math.min(.9*re,A);var ae=(g-M)/2,te=(w-re)/2,B={left:ae,top:te,x:ae,y:te,width:M,height:re,oldRatio:1,ratio:M/_,aspectRatio:k,naturalWidth:_,naturalHeight:A},U=X({},B);n.rotatable&&(B.rotate=d.rotate||0,U.rotate=0),n.scalable&&(B.scaleX=d.scaleX||1,B.scaleY=d.scaleY||1,U.scaleX=1,U.scaleY=1),o.imageData=B,o.initialImageData=U,t&&t()})},renderImage:function(t){var o=this,n=this.image,a=this.imageData;if(v(n,X({width:a.width,height:a.height,marginLeft:a.x,marginTop:a.y},at(a))),t)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&f(n,E)){var l=function(){o.imageRendering=!1,t()};this.imageRendering={abort:function(){I(n,oe,l)}},y(n,oe,l,{once:!0})}else t()},resetImage:function(){if(this.viewing||this.viewed){var t=this.image;this.viewing&&this.viewing.abort(),t.parentNode.removeChild(t),this.image=null}}},Et={bind:function(){var t=this.options,o=this.viewer,n=this.canvas,a=this.element.ownerDocument;y(o,G,this.onClick=this.click.bind(this)),y(o,Se,this.onDragStart=this.dragstart.bind(this)),y(n,qe,this.onPointerDown=this.pointerdown.bind(this)),y(a,Ve,this.onPointerMove=this.pointermove.bind(this)),y(a,Be,this.onPointerUp=this.pointerup.bind(this)),y(a,Fe,this.onKeyDown=this.keydown.bind(this)),y(window,"resize",this.onResize=this.resize.bind(this)),t.zoomable&&t.zoomOnWheel&&y(o,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleOnDblclick&&y(n,Ne,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var t=this.options,o=this.viewer,n=this.canvas,a=this.element.ownerDocument;I(o,G,this.onClick),I(o,Se,this.onDragStart),I(n,qe,this.onPointerDown),I(a,Ve,this.onPointerMove),I(a,Be,this.onPointerUp),I(a,Fe,this.onKeyDown),I(window,"resize",this.onResize),t.zoomable&&t.zoomOnWheel&&I(o,"wheel",this.onWheel,{passive:!1,capture:!0}),t.toggleOnDblclick&&I(n,Ne,this.onDblclick)}},Ot={click:function(t){var o=this.options,n=this.imageData,a=t.target,l=De(a,Oe);switch(!l&&"img"===a.localName&&"li"===a.parentElement.localName&&(l=De(a=a.parentElement,Oe)),Y&&t.isTrusted&&a===this.canvas&&clearTimeout(this.clickCanvasTimeout),l){case"mix":this.played?this.stop():o.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.hide();break;case"view":this.view(De(a,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(o.loop);break;case"play":this.play(o.fullscreen);break;case"next":this.next(o.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-n.scaleX||-1);break;case"flip-vertical":this.scaleY(-n.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(t){t.preventDefault(),this.viewed&&t.target===this.image&&(Y&&t.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(t.isTrusted?t:t.detail&&t.detail.originalEvent))},load:function(){var t=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var o=this.element,n=this.options,a=this.image,l=this.index,c=this.viewerData;h(a,fe),n.loading&&h(this.canvas,ue),a.style.cssText="height:0;"+"margin-left:".concat(c.width/2,"px;")+"margin-top:".concat(c.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){W(a,pe,n.movable),W(a,E,n.transition),t.renderImage(function(){t.viewed=!0,t.viewing=!1,O(n.viewed)&&y(o,Te,n.viewed,{once:!0}),F(o,Te,{originalImage:t.images[l],index:l,image:a},{cancelable:!1})})})},loadImage:function(t){var o=t.target,n=o.parentNode,a=n.offsetWidth||30,l=n.offsetHeight||50,c=!!De(o,"filled");wt(o,this.options,function(g,w){var d=g/w,x=a,_=l;l*d>a?c?x=l*d:_=a/d:c?_=a/d:x=l*d,v(o,X({width:x,height:_},at({translateX:(a-x)/2,translateY:(l-_)/2})))})},keydown:function(t){var o=this.options;if(o.keyboard){var n=t.keyCode||t.which||t.charCode;if(13===n&&this.viewer.contains(t.target)&&this.click(t),this.fulled)switch(n){case 27:this.played?this.stop():o.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.prev(o.loop);break;case 38:t.preventDefault(),this.zoom(o.zoomRatio,!0);break;case 39:this.next(o.loop);break;case 40:t.preventDefault(),this.zoom(-o.zoomRatio,!0);break;case 48:case 49:t.ctrlKey&&(t.preventDefault(),this.toggle())}}},dragstart:function(t){"img"===t.target.localName&&t.preventDefault()},pointerdown:function(t){var o=this.options,n=this.pointers,a=t.buttons,l=t.button;if(!(!this.viewed||this.showing||this.viewing||this.hiding||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(R(a)&&1!==a||R(l)&&0!==l||t.ctrlKey))){t.preventDefault(),t.changedTouches?D(t.changedTouches,function(g){n[g.identifier]=st(g)}):n[t.pointerId||0]=st(t);var c=!!o.movable&&j;o.zoomOnTouch&&o.zoomable&&Object.keys(n).length>1?c=le:o.slideOnTouch&&("touch"===t.pointerType||"touchstart"===t.type)&&this.isSwitchable()&&(c=L),o.transition&&(c===j||c===le)&&h(this.image,E),this.action=c}},pointermove:function(t){var o=this.pointers;!this.viewed||!this.action||(t.preventDefault(),t.changedTouches?D(t.changedTouches,function(a){X(o[a.identifier]||{},st(a,!0))}):X(o[t.pointerId||0]||{},st(t,!0)),this.change(t))},pointerup:function(t){var c,o=this,n=this.options,a=this.action,l=this.pointers;t.changedTouches?D(t.changedTouches,function(g){c=l[g.identifier],delete l[g.identifier]}):(c=l[t.pointerId||0],delete l[t.pointerId||0]),a&&(t.preventDefault(),n.transition&&(a===j||a===le)&&p(this.image,E),this.action=!1,Y&&a!==le&&c&&Date.now()-c.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),n.toggleOnDblclick&&this.viewed&&t.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){F(o.image,Ne,{originalEvent:t})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){o.imageClicked=!1},500)):(this.imageClicked=!1,n.backdrop&&"static"!==n.backdrop&&t.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){F(o.canvas,G,{originalEvent:t})},50)))))},resize:function(){var t=this;if(this.isShown&&!this.hiding&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement))return void this.stop();D(this.player.getElementsByTagName("img"),function(o){y(o,ee,t.loadImage.bind(t),{once:!0}),F(o,ee)})}},wheel:function(t){var o=this;if(this.viewed&&(t.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){o.wheeling=!1},50);var n=Number(this.options.zoomRatio)||.1,a=1;t.deltaY?a=t.deltaY>0?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=t.detail>0?1:-1),this.zoom(-a*n,!0,t)}}},At={show:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.element,n=this.options;if(n.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(t),this;if(O(n.show)&&y(o,Le,n.show,{once:!0}),!1===F(o,Le)||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var a=this.viewer;if(h(a,N),a.setAttribute("role","dialog"),a.setAttribute("aria-labelledby",this.title.id),a.setAttribute("aria-modal",!0),a.removeAttribute("aria-hidden"),n.transition&&!t){var l=this.shown.bind(this);this.transitioning={abort:function(){I(a,oe,l),h(a,$)}},p(a,E),a.initialOffsetWidth=a.offsetWidth,y(a,oe,l,{once:!0}),p(a,$)}else p(a,$),this.shown();return this},hide:function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.element,a=this.options;if(a.inline||this.hiding||!this.isShown&&!this.showing)return this;if(O(a.hide)&&y(n,Je,a.hide,{once:!0}),!1===F(n,Je))return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var l=this.viewer,c=this.image,g=function(){h(l,$),t.hidden()};if(a.transition&&!o){var w=function x(_){_&&_.target===l&&(I(l,oe,x),t.hidden())},d=function(){f(l,E)?(y(l,oe,w),h(l,$)):g()};this.transitioning={abort:function(){t.viewed&&f(c,E)?I(c,oe,d):f(l,E)&&I(l,oe,w)}},this.viewed&&f(c,E)?(y(c,oe,d,{once:!0}),this.zoomTo(0,!1,null,!0)):d()}else g();return this},view:function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.initialViewIndex;if(o=Number(o)||0,this.hiding||this.played||o<0||o>=this.length||this.viewed&&o===this.index)return this;if(!this.isShown)return this.index=o,this.show();this.viewing&&this.viewing.abort();var n=this.element,a=this.options,l=this.title,c=this.canvas,g=this.items[o],w=g.querySelector("img"),d=De(w,"originalUrl"),x=w.getAttribute("alt"),_=document.createElement("img");if(D(a.inheritedAttributes,function(ae){var te=w.getAttribute(ae);null!==te&&_.setAttribute(ae,te)}),_.src=d,_.alt=x,O(a.view)&&y(n,We,a.view,{once:!0}),!1===F(n,We,{originalImage:this.images[o],index:o,image:_})||!this.isShown||this.hiding||this.played)return this;var A=this.items[this.index];A&&(h(A,ne),A.removeAttribute("aria-selected")),p(g,ne),g.setAttribute("aria-selected",!0),a.focus&&g.focus(),this.image=_,this.viewed=!1,this.index=o,this.imageData={},p(_,fe),a.loading&&p(c,ue),c.innerHTML="",c.appendChild(_),this.renderList(),l.innerHTML="";var M,re,k=function(){var te=t.imageData,B=Array.isArray(a.title)?a.title[1]:a.title;l.innerHTML=i(O(B)?B.call(t,_,te):"".concat(x," (").concat(te.naturalWidth," \xd7 ").concat(te.naturalHeight,")"))};return y(n,Te,k,{once:!0}),this.viewing={abort:function(){I(n,Te,k),_.complete?t.imageRendering?t.imageRendering.abort():t.imageInitializing&&t.imageInitializing.abort():(_.src="",I(_,ee,M),t.timeout&&clearTimeout(t.timeout))}},_.complete?this.load():(y(_,ee,M=function(){I(_,me,re),t.load()},{once:!0}),y(_,me,re=function(){I(_,ee,M),t.timeout&&(clearTimeout(t.timeout),t.timeout=!1),h(_,fe),a.loading&&h(t.canvas,ue)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){h(_,fe),t.timeout=!1},1e3)),this},prev:function(){var o=this.index-1;return o<0&&(o=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.length-1:0),this.view(o),this},next:function(){var o=this.length-1,n=this.index+1;return n>o&&(n=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?0:o),this.view(n),this},move:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData;return this.moveTo(we(t)?t:n.x+Number(t),we(o)?o:n.y+Number(o)),this},moveTo:function(t){var o=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=this.element,c=this.options,g=this.imageData;if(t=Number(t),n=Number(n),this.viewed&&!this.played&&c.movable){var w=g.x,d=g.y,x=!1;if(R(t)?x=!0:t=w,R(n)?x=!0:n=d,x){if(O(c.move)&&y(l,He,c.move,{once:!0}),!1===F(l,He,{x:t,y:n,oldX:w,oldY:d,originalEvent:a}))return this;g.x=t,g.y=n,g.left=t,g.top=n,this.moving=!0,this.renderImage(function(){o.moving=!1,O(c.moved)&&y(l,$e,c.moved,{once:!0}),F(l,$e,{x:t,y:n,oldX:w,oldY:d,originalEvent:a},{cancelable:!1})})}}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t)),this},rotateTo:function(t){var o=this,n=this.element,a=this.options,l=this.imageData;if(R(t=Number(t))&&this.viewed&&!this.played&&a.rotatable){var c=l.rotate;if(O(a.rotate)&&y(n,"rotate",a.rotate,{once:!0}),!1===F(n,"rotate",{degree:t,oldDegree:c}))return this;l.rotate=t,this.rotating=!0,this.renderImage(function(){o.rotating=!1,O(a.rotated)&&y(n,Ke,a.rotated,{once:!0}),F(n,Ke,{degree:t,oldDegree:c},{cancelable:!1})})}return this},scaleX:function(t){return this.scale(t,this.imageData.scaleY),this},scaleY:function(t){return this.scale(this.imageData.scaleX,t),this},scale:function(t){var o=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=this.element,l=this.options,c=this.imageData;if(t=Number(t),n=Number(n),this.viewed&&!this.played&&l.scalable){var g=c.scaleX,w=c.scaleY,d=!1;if(R(t)?d=!0:t=g,R(n)?d=!0:n=w,d){if(O(l.scale)&&y(a,Ge,l.scale,{once:!0}),!1===F(a,Ge,{scaleX:t,scaleY:n,oldScaleX:g,oldScaleY:w}))return this;c.scaleX=t,c.scaleY=n,this.scaling=!0,this.renderImage(function(){o.scaling=!1,O(l.scaled)&&y(a,et,l.scaled,{once:!0}),F(a,et,{scaleX:t,scaleY:n,oldScaleX:g,oldScaleY:w},{cancelable:!1})})}}return this},zoom:function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.imageData;return t=Number(t),this.zoomTo(a.width*(t=t<0?1/(1-t):1+t)/a.naturalWidth,o,n),this},zoomTo:function(t){var o=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=this.element,g=this.options,w=this.pointers,d=this.imageData,x=d.x,_=d.y,A=d.width,k=d.height,M=d.naturalWidth,re=d.naturalHeight;if(R(t=Math.max(0,t))&&this.viewed&&!this.played&&(l||g.zoomable)){if(!l){var ae=Math.max(.01,g.minZoomRatio),te=Math.min(100,g.maxZoomRatio);t=Math.min(Math.max(t,ae),te)}if(a)switch(a.type){case"wheel":g.zoomRatio>=.055&&t>.95&&t<1.05&&(t=1);break;case"pointermove":case"touchmove":case"mousemove":t>.99&&t<1.01&&(t=1)}var B=M*t,U=re*t,lt=B-A,Ie=U-k,he=d.ratio;if(O(g.zoom)&&y(c,tt,g.zoom,{once:!0}),!1===F(c,tt,{ratio:t,oldRatio:he,originalEvent:a}))return this;if(this.zooming=!0,a){var Me=bt(this.viewer),ke=w&&Object.keys(w).length>0?Tt(w):{pageX:a.pageX,pageY:a.pageY};d.x-=lt*((ke.pageX-Me.left-x)/A),d.y-=Ie*((ke.pageY-Me.top-_)/k)}else d.x-=lt/2,d.y-=Ie/2;d.left=d.x,d.top=d.y,d.width=B,d.height=U,d.oldRatio=he,d.ratio=t,this.renderImage(function(){o.zooming=!1,O(g.zoomed)&&y(c,it,g.zoomed,{once:!0}),F(c,it,{ratio:t,oldRatio:he,originalEvent:a},{cancelable:!1})}),n&&this.tooltip()}return this},play:function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isShown||this.played)return this;var n=this.element,a=this.options;if(O(a.play)&&y(n,nt,a.play,{once:!0}),!1===F(n,nt))return this;var l=this.player,c=this.loadImage.bind(this),g=[],w=0,d=0;return this.played=!0,this.onLoadWhenPlay=c,o&&this.requestFullscreen(o),p(l,ge),D(this.items,function(_,A){var k=_.querySelector("img"),M=document.createElement("img");M.src=De(k,"originalUrl"),M.alt=k.getAttribute("alt"),M.referrerPolicy=k.referrerPolicy,w+=1,p(M,C),W(M,E,a.transition),f(_,ne)&&(p(M,$),d=A),g.push(M),y(M,ee,c,{once:!0}),l.appendChild(M)}),R(a.interval)&&a.interval>0&&w>1&&function _(){t.playing=setTimeout(function(){h(g[d],$),p(g[d=(d+=1)<w?d:0],$),_()},a.interval)}(),this},stop:function(){var t=this;if(!this.played)return this;var o=this.element,n=this.options;if(O(n.stop)&&y(o,"stop",n.stop,{once:!0}),!1===F(o,"stop"))return this;var a=this.player;return this.played=!1,clearTimeout(this.playing),D(a.getElementsByTagName("img"),function(l){I(l,ee,t.onLoadWhenPlay)}),h(a,ge),a.innerHTML="",this.exitFullscreen(),this},full:function(){var t=this,o=this.options,n=this.viewer,a=this.image,l=this.list;return!this.isShown||this.played||this.fulled||!o.inline||(this.fulled=!0,this.open(),p(this.button,P),o.transition&&(h(l,E),this.viewed&&h(a,E)),p(n,T),n.setAttribute("role","dialog"),n.setAttribute("aria-labelledby",this.title.id),n.setAttribute("aria-modal",!0),n.removeAttribute("style"),v(n,{zIndex:o.zIndex}),o.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=X({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage(function(){o.transition&&setTimeout(function(){p(a,E),p(l,E)},0)})})),this},exit:function(){var t=this,o=this.options,n=this.viewer,a=this.image,l=this.list;return this.isShown&&!this.played&&this.fulled&&o.inline?(this.fulled=!1,this.close(),h(this.button,P),o.transition&&(h(l,E),this.viewed&&h(a,E)),o.focus&&this.clearEnforceFocus(),n.removeAttribute("role"),n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-modal"),h(n,T),v(n,{zIndex:o.zIndexInline}),this.viewerData=X({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage(function(){o.transition&&setTimeout(function(){p(a,E),p(l,E)},0)})}),this):this},tooltip:function(){var t=this,o=this.options,n=this.tooltipBox;return this.viewed&&!this.played&&o.tooltip?(n.textContent="".concat(Math.round(100*this.imageData.ratio),"%"),this.tooltipping?clearTimeout(this.tooltipping):o.transition?(this.fading&&F(n,oe),p(n,ge),p(n,C),p(n,E),n.removeAttribute("aria-hidden"),n.initialOffsetWidth=n.offsetWidth,p(n,$)):(p(n,ge),n.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){o.transition?(y(n,oe,function(){h(n,ge),h(n,C),h(n,E),n.setAttribute("aria-hidden",!0),t.fading=!1},{once:!0}),h(n,$),t.fading=!0):(h(n,ge),n.setAttribute("aria-hidden",!0)),t.tooltipping=!1},1e3),this):this},toggle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.zoomTo(1===this.imageData.ratio?this.imageData.oldRatio:1,!0,t),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=X({},this.initialImageData),this.renderImage()),this},update:function(){var t=this,o=this.element,n=this.options,a=this.isImg;if(a&&!o.parentNode)return this.destroy();var l=[];if(D(a?[o]:o.querySelectorAll("img"),function(d){O(n.filter)?n.filter.call(t,d)&&l.push(d):t.getImageURL(d)&&l.push(d)}),!l.length)return this;if(this.images=l,this.length=l.length,this.ready){var c=[];if(D(this.items,function(d,x){var _=d.querySelector("img"),A=l[x];A&&_?(A.src!==_.src||A.alt!==_.alt)&&c.push(x):c.push(x)}),v(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var g=c.indexOf(this.index);if(g>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-g,this.length-1),0));else{var w=this.items[this.index];p(w,ne),w.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var t=this.element,o=this.options;return t[m]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),o.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):o.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),o.inline||I(t,G,this.onStart),t[m]=void 0,this):this}},Dt={getImageURL:function(t){var o=this.options.url;return Pe(o)?t.getAttribute(o):O(o)?o.call(this,t):""},enforceFocus:function(){var t=this;this.clearEnforceFocus(),y(document,ze,this.onFocusin=function(o){var n=t.viewer,a=o.target;if(a!==document&&a!==n&&!n.contains(a)){for(;a;){if(null!==a.getAttribute("tabindex")||"true"===a.getAttribute("aria-modal"))return;a=a.parentElement}n.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(I(document,ze,this.onFocusin),this.onFocusin=null)},open:function(){var t=this.body;p(t,de),t.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px")},close:function(){var t=this.body;h(t,de),t.style.paddingRight=this.initialBodyPaddingRight},shown:function(){var t=this.element,o=this.options,n=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,o.focus&&(n.focus(),this.enforceFocus()),O(o.shown)&&y(t,"shown",o.shown,{once:!0}),!1!==F(t,"shown")&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var t=this.element,o=this.options,n=this.viewer;o.fucus&&this.clearEnforceFocus(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.close(),this.unbind(),p(n,N),n.removeAttribute("role"),n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-modal"),n.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.hiding=!1,this.destroyed||(O(o.hidden)&&y(t,"hidden",o.hidden,{once:!0}),F(t,"hidden",null,{cancelable:!1}))},requestFullscreen:function(t){var o=this.element.ownerDocument;if(this.fulled&&!(o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement)){var n=o.documentElement;n.requestFullscreen?Ee(t)?n.requestFullscreen(t):n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()}},exitFullscreen:function(){var t=this.element.ownerDocument;this.fulled&&(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)&&(t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen())},change:function(t){var o=this.options,n=this.pointers,a=n[Object.keys(n)[0]];if(a){var l=a.endX-a.startX,c=a.endY-a.startY;switch(this.action){case j:this.move(l,c,t);break;case le:this.zoom(function Ct(r){var t=b({},r),o=[];return D(r,function(n,a){delete t[a],D(t,function(l){var c=Math.abs(n.startX-l.startX),g=Math.abs(n.startY-l.startY),w=Math.abs(n.endX-l.endX),d=Math.abs(n.endY-l.endY),x=Math.sqrt(c*c+g*g),_=Math.sqrt(w*w+d*d);o.push((_-x)/x)})}),o.sort(function(n,a){return Math.abs(n)<Math.abs(a)}),o[0]}(n),!1,t);break;case L:this.action="switched";var g=Math.abs(l);g>1&&g>Math.abs(c)&&(this.pointers={},l>1?this.prev(o.loop):l<-1&&this.next(o.loop))}D(n,function(w){w.startX=w.endX,w.startY=w.endY})}},isSwitchable:function(){var t=this.imageData,o=this.viewerData;return this.length>1&&t.x>=0&&t.y>=0&&t.width<=o.width&&t.height<=o.height}},It=z.Viewer,Mt=(r=-1,function(){return r+=1}),xt=function(){function r(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(J(this,r),!t||1!==t.nodeType)throw new Error("The first argument is required and must be an element.");this.element=t,this.options=X({},q,Ee(o)&&o),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.id=Mt(),this.init()}return function K(r,t,o){return t&&S(r.prototype,t),o&&S(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}(r,[{key:"init",value:function(){var o=this,n=this.element,a=this.options;if(!n[m]){n[m]=this,a.focus&&!a.keyboard&&(a.focus=!1);var l="img"===n.localName,c=[];if(D(l?[n]:n.querySelectorAll("img"),function(d){O(a.filter)?a.filter.call(o,d)&&c.push(d):o.getImageURL(d)&&c.push(d)}),this.isImg=l,this.length=c.length,this.images=c,this.initBody(),we(document.createElement(m).style.transition)&&(a.transition=!1),a.inline){var g=0,w=function(){var x;(g+=1)===o.length&&(o.initializing=!1,o.delaying={abort:function(){clearTimeout(x)}},x=setTimeout(function(){o.delaying=!1,o.build()},0))};this.initializing={abort:function(){D(c,function(x){x.complete||(I(x,ee,w),I(x,me,w))})}},D(c,function(d){var x,_;d.complete?w():(y(d,ee,x=function(){I(d,me,_),w()},{once:!0}),y(d,me,_=function(){I(d,ee,x),w()},{once:!0}))})}else y(n,G,this.onStart=function(d){var x=d.target;"img"===x.localName&&(!O(a.filter)||a.filter.call(o,x))&&o.view(o.images.indexOf(x))})}}},{key:"build",value:function(){if(!this.ready){var o=this.element,n=this.options,a=o.parentNode,l=document.createElement("div");l.innerHTML='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>';var c=l.querySelector(".".concat(m,"-container")),g=c.querySelector(".".concat(m,"-title")),w=c.querySelector(".".concat(m,"-toolbar")),d=c.querySelector(".".concat(m,"-navbar")),x=c.querySelector(".".concat(m,"-button")),_=c.querySelector(".".concat(m,"-canvas"));if(this.parent=a,this.viewer=c,this.title=g,this.toolbar=w,this.navbar=d,this.button=x,this.canvas=_,this.footer=c.querySelector(".".concat(m,"-footer")),this.tooltipBox=c.querySelector(".".concat(m,"-tooltip")),this.player=c.querySelector(".".concat(m,"-player")),this.list=c.querySelector(".".concat(m,"-list")),c.id="".concat(m).concat(this.id),g.id="".concat(m,"Title").concat(this.id),p(g,n.title?rt(Array.isArray(n.title)?n.title[0]:n.title):N),p(d,n.navbar?rt(n.navbar):N),W(x,N,!n.button),n.keyboard&&x.setAttribute("tabindex",0),n.backdrop&&(p(c,"".concat(m,"-backdrop")),!n.inline&&"static"!==n.backdrop&&ft(_,Oe,"hide")),Pe(n.className)&&n.className&&n.className.split(Re).forEach(function(U){p(c,U)}),n.toolbar){var A=document.createElement("ul"),k=Ee(n.toolbar),M=Ae.slice(0,3),re=Ae.slice(7,9),ae=Ae.slice(9);k||p(w,rt(n.toolbar)),D(k?n.toolbar:Ae,function(U,lt){var Ie=k&&Ee(U),he=k?ht(lt):U,Me=Ie&&!we(U.show)?U.show:U;if(Me&&(n.zoomable||-1===M.indexOf(he))&&(n.rotatable||-1===re.indexOf(he))&&(n.scalable||-1===ae.indexOf(he))){var ke=Ie&&!we(U.size)?U.size:U,vt=Ie&&!we(U.click)?U.click:U,ve=document.createElement("li");n.keyboard&&ve.setAttribute("tabindex",0),ve.setAttribute("role","button"),p(ve,"".concat(m,"-").concat(he)),O(vt)||ft(ve,Oe,he),R(Me)&&p(ve,rt(Me)),-1!==["small","large"].indexOf(ke)?p(ve,"".concat(m,"-").concat(ke)):"play"===he&&p(ve,"".concat(m,"-large")),O(vt)&&y(ve,G,vt),A.appendChild(ve)}}),w.appendChild(A)}else p(w,N);if(!n.rotatable){var te=w.querySelectorAll('li[class*="rotate"]');p(te,fe),D(te,function(U){w.appendChild(U)})}if(n.inline)p(x,Z),v(c,{zIndex:n.zIndexInline}),"static"===window.getComputedStyle(a).position&&v(a,{position:"relative"}),a.insertBefore(c,o.nextSibling);else{p(x,H),p(c,T),p(c,C),p(c,N),v(c,{zIndex:n.zIndex});var B=n.container;Pe(B)&&(B=o.ownerDocument.querySelector(B)),B||(B=this.body),B.appendChild(c)}if(n.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,O(n.ready)&&y(o,"ready",n.ready,{once:!0}),!1===F(o,"ready"))return void(this.ready=!1);this.ready&&n.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=It,r}},{key:"setDefaults",value:function(o){X(q,Ee(o)&&o)}}]),r}();return X(xt.prototype,Pt,Et,Ot,At,Dt),xt}()}}]);